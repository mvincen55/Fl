<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Orlando Vacation">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#667eea">
    <meta name="description" content="Your Orlando Vacation Companion App - August 12-17, 2025">
    <link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAALEwAACxMBAJqcGAAAAdVJREFUeF7t1CEOwjAAAEDG//8MEydmJghCEARBEIT7dEl3SZve7Ou1TK21tpZlCUAAgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAAIgAB8A2Cc5+m6rvHr+z6mac5p27Yv2/bttu2/bdvu2/bttu2/bdvu2/bttu2/bdt+sG3bbdu2B9i2/QHbth9g2/YHbNt+gG3bH7Bt+wG27T+wbf8BbPsPYNv+A9i2bdu2bdu2bdu2bQ==">
    <link rel="manifest" href="data:application/manifest+json;base64,eyJuYW1lIjoiT3JsYW5kbyBWYWNhdGlvbiBBcHAiLCJzaG9ydF9uYW1lIjoiT3JsYW5kbyIsImRlc2NyaXB0aW9uIjoiWW91ciBPcmxhbmRvIFZhY2F0aW9uIENvbXBhbmlvbiIsInN0YXJ0X3VybCI6Ii4iLCJkaXNwbGF5Ijoic3RhbmRhbG9uZSIsImJhY2tncm91bmRfY29sb3IiOiIjZmZmZmZmIiwidGhlbWVfY29sb3IiOiIjNjY3ZWVhIiwib3JpZW50YXRpb24iOiJwb3J0cmFpdCIsImljb25zIjpbeyJzcmMiOiJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUNBQUFBQWdDQVlBQUFCemVucjBBQUFBQkhOQ1NWUUlDQWdJZkFoa2lBQUFBQWx3U0ZsekFBQUFBUUFBQUFCUGdKcVVBQUFBQ1hCSVdYTUFBQXNUQUFBTEV3RUFtcHdZQUFBQUIzUkpUVVVINUFZREZBMGFBelFBQUFBQmRGSk9VK3pRQUFBRlFTVVJCVkhqYTdWaGRsOUxIRUFBQUFCSlJVNUVya0pnZ2c9PSIsInNpemVzIjoiMTkyeDE5MiIsInR5cGUiOiJpbWFnZS9wbmcifV19">
    <title>Orlando Vacation App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        overflow-x: hidden;
        -webkit-tap-highlight-color: transparent;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        user-select: none;
    }

    .app-container {
        max-width: 430px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.95);
        min-height: 100vh;
        position: relative;
        box-shadow: 0 0 40px rgba(0, 0, 0, 0.2);
        overflow-x: hidden;
    }

    .header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 20px;
        color: white;
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .header-top {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .header h1 {
        font-size: 28px;
        margin-bottom: 5px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .header .subtitle {
        opacity: 0.9;
        font-size: 14px;
    }

    .install-btn {
        padding: 8px 15px;
        background: rgba(255, 255, 255, 0.2);
        border: 2px solid white;
        border-radius: 20px;
        color: white;
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .install-btn:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: scale(1.05);
    }

    .install-btn.hidden {
        display: none !important;
    }

    .nav-tabs {
        display: flex;
        background: white;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 105px;
        z-index: 99;
    }

    .nav-tab {
        flex: 1;
        padding: 15px;
        text-align: center;
        cursor: pointer;
        border: none;
        background: white;
        color: #666;
        font-size: 14px;
        transition: all 0.3s;
        border-bottom: 3px solid transparent;
    }

    .nav-tab.active {
        color: #667eea;
        border-bottom-color: #667eea;
        font-weight: 600;
    }

    .nav-tab:hover {
        background: #f8f9fa;
    }

    .content {
        padding: 20px;
        animation: fadeIn 0.5s;
    }

    .day-card {
        background: white;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s, box-shadow 0.3s;
        position: relative;
        overflow: hidden;
    }

    .day-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
    }

    .day-card.completed {
        background: linear-gradient(135deg, #f5f5f5 0%, #e8f5e9 100%);
    }

    .day-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
    }

    .day-title {
        font-size: 18px;
        font-weight: 600;
        color: #333;
    }

    .day-date {
        font-size: 14px;
        color: #888;
    }

    .event-item {
        padding: 12px;
        margin: 10px 0;
        background: #f8f9fa;
        border-radius: 10px;
        display: flex;
        align-items: center;
        gap: 10px;
        transition: all 0.3s;
        cursor: pointer;
    }

    .event-item:hover {
        background: #e9ecef;
        transform: translateX(5px);
    }

    .event-item.completed {
        opacity: 0.6;
        text-decoration: line-through;
        background: #e8f5e9;
    }

    .event-time {
        font-weight: 600;
        color: #667eea;
        min-width: 70px;
    }

    .event-description {
        flex: 1;
        font-size: 14px;
        color: #555;
    }

    .checkbox {
        width: 20px;
        height: 20px;
        border: 2px solid #667eea;
        border-radius: 4px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s;
    }

    .checkbox.checked {
        background: #667eea;
    }

    .checkbox.checked::after {
        content: '✓';
        color: white;
        font-weight: bold;
    }

    .action-buttons {
        display: flex;
        gap: 10px;
        margin-top: 15px;
        flex-wrap: wrap;
        justify-content: center;
    }

    .action-btn {
        padding: 10px 15px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        border-radius: 25px;
        font-size: 13px;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        gap: 5px;
        white-space: nowrap;
    }

    .action-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }
    
    .action-btn.secondary {
        background: linear-gradient(135deg, #ea4c89 0%, #f093fb 100%);
    }

    .seaworld-section {
        background: linear-gradient(135deg, #00bcd4 0%, #0288d1 100%);
        border-radius: 15px;
        padding: 20px;
        color: white;
        margin-bottom: 20px;
    }

    .seaworld-section h2 {
        margin-bottom: 10px;
    }

    .ai-chat {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
    }

    .ai-fab {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        font-size: 24px;
        cursor: pointer;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        transition: all 0.3s;
    }

    .ai-fab:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
    }

    .chat-window {
        position: fixed;
        bottom: 90px;
        right: 20px;
        width: 350px;
        height: 500px;
        background: white;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        display: none;
        flex-direction: column;
        overflow: hidden;
        animation: slideUp 0.3s;
    }

    .chat-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .chat-messages {
        flex: 1;
        padding: 15px;
        overflow-y: auto;
        background: #f8f9fa;
    }

    .chat-message {
        margin: 10px 0;
        padding: 10px 15px;
        border-radius: 15px;
        max-width: 80%;
        animation: fadeIn 0.3s;
    }

    .chat-message.user {
        background: #667eea;
        color: white;
        margin-left: auto;
    }

    .chat-message.ai {
        background: white;
        color: #333;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .chat-input-container {
        padding: 15px;
        background: white;
        border-top: 1px solid #e0e0e0;
        display: flex;
        gap: 10px;
    }

    .chat-input {
        flex: 1;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 25px;
        outline: none;
        font-size: 14px;
    }

    .chat-send {
        padding: 10px 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s;
    }

    .chat-send:hover {
        transform: scale(1.05);
    }

    .confetti {
        position: fixed;
        width: 10px;
        height: 10px;
        background: #ff5722;
        animation: confettiFall 3s linear;
        pointer-events: none;
    }

    @keyframes confettiFall {
        0% {
            transform: translateY(-100vh) rotate(0deg);
            opacity: 1;
        }
        100% {
            transform: translateY(100vh) rotate(720deg);
            opacity: 0;
        }
    }

    .install-modal {
        width: 400px;
        max-height: 80vh;
        overflow-y: auto;
    }

    .install-modal h4 {
        color: #667eea;
        margin: 15px 0 10px 0;
        font-size: 16px;
    }

    .install-instructions {
        color: #555;
        line-height: 1.6;
    }

    .install-instructions ol {
        margin-left: 20px;
        margin-bottom: 15px;
    }

    .install-instructions li {
        margin: 8px 0;
        font-size: 14px;
    }

    .install-instructions strong {
        color: #333;
        font-weight: 600;
    }

    .install-section {
        margin-bottom: 20px;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes slideUp {
        from {
            transform: translateY(20px);
            opacity: 0;
        }
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }

    @keyframes modalSlideIn {
        from {
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.8);
        }
        to {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
    }

    @keyframes slideUp {
        from {
            transform: translateY(20px);
            opacity: 0;
        }
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }

    .reminder-modal, .event-options-modal, .install-modal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        z-index: 1001;
        display: none;
        animation: fadeIn 0.3s;
        max-width: 90%;
    }

    .reminder-modal h3, .event-options-modal h3, .install-modal h3 {
        margin-bottom: 20px;
        color: #333;
    }

    .reminder-input {
        width: 100%;
        padding: 10px;
        margin: 10px 0;
        border: 1px solid #ddd;
        border-radius: 8px;
        outline: none;
    }

    .reminder-buttons {
        display: flex;
        gap: 10px;
        justify-content: flex-end;
        margin-top: 20px;
    }

    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        display: none;
    }

    .event-options-modal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 25px;
        border-radius: 20px;
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        z-index: 1001;
        display: none;
        animation: fadeIn 0.3s;
        max-width: 90%;
        width: 350px;
    }

    .event-options-modal h3 {
        margin-bottom: 15px;
        color: #333;
        font-size: 18px;
    }

    .event-options-modal .event-info {
        color: #666;
        margin-bottom: 20px;
        padding: 10px;
        background: #f8f9fa;
        border-radius: 10px;
        font-size: 14px;
    }

    .event-option-btn {
        width: 100%;
        padding: 12px;
        margin: 8px 0;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 15px;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
    }

    .event-option-btn:hover {
        transform: scale(1.02);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }

    .event-option-btn.secondary {
        background: linear-gradient(135deg, #00bcd4 0%, #0288d1 100%);
    }

    .event-option-btn.close {
        background: #6c757d;
        margin-top: 15px;
    }

    .day-selector {
        padding: 15px 20px;
        background: white;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 155px;
        z-index: 98;
    }

    .day-dropdown {
        width: 100%;
        padding: 12px 15px;
        border: 2px solid #e0e0e0;
        border-radius: 10px;
        font-size: 15px;
        font-weight: 600;
        color: #333;
        background: white;
        cursor: pointer;
        transition: all 0.3s;
    }

    .day-dropdown:hover {
        border-color: #667eea;
    }

    .day-dropdown:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .day-card.hidden {
        display: none;
    }

    .event-item {
        padding: 12px;
        margin: 10px 0;
        background: #f8f9fa;
        border-radius: 10px;
        display: flex;
        align-items: center;
        gap: 10px;
        transition: all 0.3s;
        cursor: pointer;
        position: relative;
    }

    .event-item:hover {
        background: #e9ecef;
        transform: translateX(5px);
    }

    .event-item:hover::after {
        content: '👆 Click for options';
        position: absolute;
        right: 10px;
        font-size: 11px;
        color: #667eea;
        animation: fadeIn 0.3s;
    }

    .checkbox {
        width: 20px;
        height: 20px;
        border: 2px solid #667eea;
        border-radius: 4px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s;
        z-index: 1;
    }

    .day-notes {
        margin-top: 15px;
        padding-top: 15px;
        border-top: 1px solid #e0e0e0;
    }

    .day-notes-label {
        font-size: 12px;
        color: #888;
        margin-bottom: 5px;
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .day-notes-input {
        width: 100%;
        min-height: 60px;
        padding: 10px;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        font-size: 14px;
        font-family: inherit;
        resize: vertical;
        transition: all 0.3s;
    }

    .day-notes-input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .day-notes-input::placeholder {
        color: #aaa;
        font-style: italic;
    }

    .save-indicator {
        font-size: 11px;
        color: #4caf50;
        margin-left: 5px;
        opacity: 0;
        transition: opacity 0.3s;
    }

    .save-indicator.show {
        opacity: 1;
    }

    .game-container {
        background: white;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .game-selector {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        background: white;
        padding: 15px;
        border-radius: 15px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .game-select-btn {
        flex: 1;
        padding: 12px;
        background: linear-gradient(135deg, #e0e0e0 0%, #f5f5f5 100%);
        border: none;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        color: #666;
    }

    .game-select-btn.active {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        transform: scale(1.05);
    }

    .game-select-btn:hover {
        transform: scale(1.02);
    }

    .game-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    .game-title {
        font-size: 24px;
        font-weight: bold;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .game-stats {
        display: flex;
        gap: 20px;
        margin-bottom: 15px;
        justify-content: center;
    }

    .stat-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 10px 15px;
        background: #f8f9fa;
        border-radius: 10px;
    }

    .stat-label {
        font-size: 12px;
        color: #666;
    }

    .stat-value {
        font-size: 20px;
        font-weight: bold;
        color: #667eea;
    }

    /* Merge Game Styles */
    .merge-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin: 20px 0;
    }

    .next-fruit-display {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 20px;
        background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);
        border-radius: 25px;
        color: white;
        font-weight: bold;
        margin-bottom: 15px;
    }

    #mergeCanvas {
        border: 3px solid #667eea;
        border-radius: 15px;
        background: linear-gradient(180deg, #e3f2fd 0%, #bbdefb 100%);
        cursor: pointer;
    }

    .fruit-evolution {
        text-align: center;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 10px;
        margin-top: 15px;
        font-size: 20px;
    }

    /* Sudoku Styles */
    .sudoku-board {
        display: grid;
        grid-template-columns: repeat(9, 1fr);
        gap: 2px;
        max-width: 450px;
        margin: 20px auto;
        padding: 10px;
        background: #667eea;
        border-radius: 10px;
    }

    .sudoku-cell {
        aspect-ratio: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        background: white;
        font-size: 20px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
        border: 1px solid #e0e0e0;
        position: relative;
    }

    .sudoku-cell:hover {
        background: #f0f4ff;
        transform: scale(1.05);
    }

    .sudoku-cell.selected {
        background: #e3f2fd;
        box-shadow: 0 0 0 2px #667eea;
    }

    .sudoku-cell.given {
        background: #f5f5f5;
        color: #333;
        cursor: default;
    }

    .sudoku-cell.error {
        background: #ffebee;
        color: #f44336;
    }

    .sudoku-cell.hint {
        animation: pulse 1s ease-in-out;
        background: #fff3e0;
    }

    .sudoku-cell:nth-child(3n):not(:nth-child(9n)) {
        border-right: 2px solid #667eea;
    }

    .sudoku-cell:nth-child(n+19):nth-child(-n+27),
    .sudoku-cell:nth-child(n+46):nth-child(-n+54) {
        border-bottom: 2px solid #667eea;
    }

    .number-buttons {
        display: flex;
        gap: 5px;
        justify-content: center;
        margin: 20px 0;
        flex-wrap: wrap;
    }

    .num-btn {
        width: 40px;
        height: 40px;
        border: none;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 8px;
        font-size: 18px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
    }

    .num-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }

    .num-btn.special {
        background: linear-gradient(135deg, #f44336 0%, #e91e63 100%);
    }

    /* Tetris Styles */
    .tetris-container {
        display: flex;
        gap: 20px;
        justify-content: center;
        margin: 20px 0;
    }

    #tetrisCanvas {
        border: 3px solid #667eea;
        border-radius: 15px;
        background: linear-gradient(180deg, #1a237e 0%, #3949ab 100%);
    }

    .tetris-next {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    #nextCanvas {
        border: 2px solid #667eea;
        border-radius: 10px;
        background: #f8f9fa;
    }

    .tetris-instructions {
        text-align: center;
        padding: 10px;
        background: #f8f9fa;
        border-radius: 10px;
        margin-top: 15px;
    }

    .game-controls {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin-top: 20px;
    }

    .game-btn {
        padding: 12px 25px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        border-radius: 25px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
    }

    .game-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }

    .game-btn.secondary {
        background: linear-gradient(135deg, #00bcd4 0%, #0288d1 100%);
    }

    .game-message {
        text-align: center;
        padding: 15px;
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
        border-radius: 10px;
        font-size: 18px;
        font-weight: bold;
        margin-top: 20px;
        display: none;
    }

    .game-message.show {
        display: block;
        animation: slideUp 0.5s;
    }

    .level-indicator {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 20px;
        background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);
        color: white;
        border-radius: 25px;
        font-weight: bold;
    }

    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
    }

    .weather-widget {
        background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
        border-radius: 15px;
        padding: 15px;
        margin-bottom: 20px;
        color: white;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .weather-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
    }

    .weather-location {
        font-size: 14px;
        opacity: 0.9;
    }

    .weather-refresh {
        background: rgba(255, 255, 255, 0.2);
        border: none;
        border-radius: 50%;
        width: 30px;
        height: 30px;
        cursor: pointer;
        transition: all 0.3s;
    }

    .weather-refresh:active {
        transform: rotate(180deg);
    }

    .weather-main {
        text-align: center;
        margin: 15px 0;
    }

    .weather-temp {
        font-size: 48px;
        font-weight: bold;
    }

    .weather-desc {
        font-size: 16px;
        opacity: 0.9;
        margin-top: 5px;
    }

    .weather-details {
        display: flex;
        justify-content: space-around;
        padding-top: 15px;
        border-top: 1px solid rgba(255, 255, 255, 0.3);
    }

    .weather-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 5px;
    }

    .weather-label {
        font-size: 11px;
        opacity: 0.8;
    }

    .weather-item span:last-child {
        font-size: 14px;
        font-weight: 600;
    }

    .countdown {
        text-align: center;
        padding: 15px;
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        border-radius: 15px;
        color: white;
        margin-bottom: 20px;
    }

    .countdown-number {
        font-size: 36px;
        font-weight: bold;
        margin: 10px 0;
    }

    .park-map-container {
        position: relative;
        margin: 15px 0;
        background: white;
        border-radius: 15px;
        padding: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .seaworld-map-img {
        width: 100%;
        height: auto;
        border-radius: 10px;
        cursor: zoom-in;
        transition: all 0.3s;
    }

    .seaworld-map-img.zoomed {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(1.5);
        z-index: 1000;
        max-width: 90vw;
        max-height: 90vh;
        cursor: zoom-out;
    }

    .map-legend {
        margin-top: 15px;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 10px;
    }

    .legend-item {
        display: flex;
        align-items: center;
        gap: 10px;
        margin: 8px 0;
        font-size: 13px;
        color: #333;
    }

    .legend-dot {
        width: 25px;
        height: 25px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 12px;
        flex-shrink: 0;
    }

    .alert-box {
        background: #d1ecf1;
        border: 1px solid #bee5eb;
        border-radius: 10px;
        padding: 12px;
        margin: 15px 0;
        font-size: 13px;
        line-height: 1.5;
    }

    .alert-box strong {
        color: #0c5460;
    }

    /* Mobile optimizations */
    @media (max-width: 430px) {
        .header h1 {
            font-size: 22px;
        }
        
        .header-top {
            gap: 10px;
        }
        
        .install-btn {
            font-size: 11px;
            padding: 6px 10px;
        }
        
        .install-modal, .reminder-modal, .event-options-modal {
            width: calc(100vw - 40px);
            max-width: 350px;
        }
        
        .nav-tab {
            font-size: 12px;
            padding: 12px 5px;
        }
        
        .action-btn {
            font-size: 11px;
            padding: 8px 10px;
        }
        
        .weather-widget {
            padding: 12px;
        }
        
        .weather-temp {
            font-size: 36px;
        }
        
        .weather-desc {
            font-size: 14px;
        }
        
        .weather-details {
            font-size: 12px;
        }
        
        .countdown-number {
            font-size: 32px;
        }
        
        .game-board {
            max-width: 350px;
        }
        
        #mergeCanvas {
            width: 100%;
            max-width: 350px;
            height: auto;
        }
        
        #tetrisCanvas {
            width: 100%;
            max-width: 300px;
            height: auto;
        }
        
        .sudoku-board {
            max-width: 100%;
            padding: 5px;
        }
        
        .sudoku-cell {
            font-size: 14px;
        }
        
        .event-item:hover::after {
            display: none;
        }
        
        .day-card {
            padding: 15px;
            margin-bottom: 15px;
        }
        
        input, textarea, select {
            font-size: 16px; /* Prevents zoom on iOS */
        }
        
        .game-select-btn {
            font-size: 12px;
            padding: 10px;
        }
        
        .ai-fab {
            width: 50px;
            height: 50px;
            font-size: 20px;
        }
        
        .chat-window {
            width: calc(100vw - 40px);
            max-width: 350px;
            height: 450px;
            bottom: 80px;
            right: 20px;
        }
        
        .legend-item {
            font-size: 11px;
        }
        
        .legend-dot {
            width: 20px;
            height: 20px;
            font-size: 10px;
        }
    }

    /* iOS specific fixes */
    @supports (-webkit-touch-callout: none) {
        .app-container {
            padding-bottom: env(safe-area-inset-bottom);
        }
        
        .ai-chat {
            bottom: calc(20px + env(safe-area-inset-bottom));
        }
        
        input, textarea, select {
            font-size: 16px !important;
        }
    }

    /* Remove hover effects on touch devices */
    @media (hover: none) {
        .action-btn:hover {
            transform: none;
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
        }
        
        .nav-tab:hover {
            background: white;
        }
        
        .event-item:hover {
            transform: none;
            background: #f8f9fa;
        }
        
        .game-select-btn:hover {
            transform: none;
        }
        
        .fruit-cell:hover {
            transform: none;
        }
    }

    .countdown-number {
        font-size: 48px;
        font-weight: bold;
        margin: 10px 0;
    }

    .progress-bar {
        width: 100%;
        height: 8px;
        background: #e0e0e0;
        border-radius: 4px;
        overflow: hidden;
        margin: 15px 0;
    }

    .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        transition: width 0.5s;
    }
</style>
```

</head>
<body>
    <div class="app-container">
        <div class="header">
            <div class="header-top">
                <div>
                    <h1>🌴 Orlando Adventure</h1>
                    <div class="subtitle">August 12-17, 2025</div>
                </div>
                <button class="install-btn" id="installBtn" onclick="installApp()" style="display: flex;">
                    📱 Download App
                </button>
            </div>
        </div>

```
    <div class="nav-tabs">
        <button class="nav-tab active" onclick="showTab('itinerary')">📅 Itinerary</button>
        <button class="nav-tab" onclick="showTab('seaworld')">🐬 SeaWorld</button>
        <button class="nav-tab" onclick="showTab('reminders')">⏰ Reminders</button>
        <button class="nav-tab" onclick="showTab('games')">🎮 Games</button>
    </div>

    <div class="day-selector" id="daySelector" style="display: block;">
        <select class="day-dropdown" onchange="filterByDay(this.value)">
            <option value="all">📅 All Days</option>
            <option value="tuesday">✈️ Tue 8/12 - Travel</option>
            <option value="wednesday">🏖️ Wed 8/13 - Pirates</option>
            <option value="thursday">🐬 Thu 8/14 - Discovery & Cirque</option>
            <option value="friday">🎢 Fri 8/15 - SeaWorld</option>
            <option value="saturday">🏰 Sat 8/16 - Disney Resorts</option>
            <option value="sunday">🚂 Sun 8/17 - Train & Beach</option>
            <option value="today">⭐ Today's Plan</option>
        </select>
    </div>

    <div class="content" id="itinerary-tab">
        <div class="weather-widget">
            <div class="weather-header">
                <span class="weather-location">🌴 Orlando, FL</span>
                <button class="weather-refresh" onclick="updateWeather()">🔄</button>
            </div>
            <div class="weather-main">
                <div class="weather-temp" id="weatherTemp">82°F</div>
                <div class="weather-desc" id="weatherDesc">Partly Cloudy</div>
            </div>
            <div class="weather-details">
                <div class="weather-item">
                    <span class="weather-label">Feels Like</span>
                    <span id="weatherFeels">88°F</span>
                </div>
                <div class="weather-item">
                    <span class="weather-label">Humidity</span>
                    <span id="weatherHumidity">75%</span>
                </div>
                <div class="weather-item">
                    <span class="weather-label">UV Index</span>
                    <span id="weatherUV">High</span>
                </div>
            </div>
        </div>

        <div class="countdown">
            <div>Trip starts in</div>
            <div class="countdown-number" id="countdown">Loading...</div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progress" style="width: 0%"></div>
        </div>

        <!-- Tuesday -->
        <div class="day-card" data-day="tuesday">
            <div class="day-header">
                <div class="day-title">✈️ Travel Day</div>
                <div class="day-date">Tuesday 8/12</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, 'Boston Logan Airport', 'Flight Departure', 'NK1841')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">8:35 PM</div>
                <div class="event-description">Flight departs BOS (Spirit NK 1841)</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, 'Orlando International Airport', 'Arrival')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">11:59 PM</div>
                <div class="event-description">Arrive MCO</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, 'MCO Airport Terminals A/B, Arrivals Level 2', 'Westgate Lakes Resort & Spa, 9500 Turkey Lake Rd, Orlando, FL 32819', 'Uber to Hotel')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">12:10 AM</div>
                <div class="event-description">Uber to Westgate Lakes</div>
            </div>
            <div class="action-buttons">
                <button class="action-btn" onclick="openUber('MCO Airport', 'Westgate Lakes Resort & Spa, 9500 Turkey Lake Rd, Orlando, FL 32819')">
                    🚗 Uber ($35-55)
                </button>
                <button class="action-btn secondary" onclick="openLyft('MCO Airport', 'Westgate Lakes Resort & Spa, 9500 Turkey Lake Rd, Orlando, FL 32819')">
                    🚙 Lyft ($32-50)
                </button>
                <button class="action-btn" onclick="openMaps('Westgate Lakes Resort & Spa, Orlando, FL')">
                    📍 Directions
                </button>
            </div>
            <div class="day-notes">
                <div class="day-notes-label">
                    📝 Notes for Tuesday
                    <span class="save-indicator" id="save-tuesday">✓ Saved</span>
                </div>
                <textarea class="day-notes-input" 
                          id="notes-tuesday" 
                          placeholder="Add notes, reminders, or special instructions for this day..."
                          onkeyup="saveNotes('tuesday')"></textarea>
            </div>
        </div>

        <!-- Wednesday -->
        <div class="day-card" data-day="wednesday">
            <div class="day-header">
                <div class="day-title">🏖️ Recovery & Pool Day</div>
                <div class="day-date">Wednesday 8/13</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, null, 'Sleep In')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">Morning</div>
                <div class="event-description">Sleep in & Target delivery</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, 'Steak n Shake', 'Lunch Delivery')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">Lunch</div>
                <div class="event-description">Steak 'n Shake (DoorDash)</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, 'Westgate Lakes Resort', 'Pirates Dinner Adventure, 6400 Carrier Dr, Orlando, FL 32819', 'Pirates Show')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">6:55 PM</div>
                <div class="event-description">Uber to Pirates Dinner Adventure</div>
            </div>
            <div class="action-buttons">
                <button class="action-btn" onclick="openUber('Westgate Lakes Resort', 'Pirates Dinner Adventure, 6400 Carrier Dr, Orlando, FL 32819')">
                    🚗 Uber ($12-18)
                </button>
                <button class="action-btn secondary" onclick="openLyft('Westgate Lakes Resort', 'Pirates Dinner Adventure, 6400 Carrier Dr, Orlando, FL 32819')">
                    🚙 Lyft ($11-16)
                </button>
                <button class="action-btn" onclick="openMaps('Pirates Dinner Adventure, Orlando, FL')">
                    📍 Directions
                </button>
            </div>
            <div class="day-notes">
                <div class="day-notes-label">
                    📝 Notes for Wednesday
                    <span class="save-indicator" id="save-wednesday">✓ Saved</span>
                </div>
                <textarea class="day-notes-input" 
                          id="notes-wednesday" 
                          placeholder="Add notes, reminders, or special instructions for this day..."
                          onkeyup="saveNotes('wednesday')"></textarea>
            </div>
        </div>

        <!-- Thursday -->
        <div class="day-card" data-day="thursday">
            <div class="day-header">
                <div class="day-title">🐬 Discovery Cove & Cirque</div>
                <div class="day-date">Thursday 8/14</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, 'Westgate Lakes Resort', 'Discovery Cove, 6000 Discovery Cove Way, Orlando, FL 32821', 'Discovery Cove')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">8:00 AM</div>
                <div class="event-description">Uber to Discovery Cove</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, 'Discovery Cove, Orlando, FL', 'Discovery Cove Check-in')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">8:30 AM</div>
                <div class="event-description">Discovery Cove Check-in</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, null, 'Dolphin Swim')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">9:30 AM</div>
                <div class="event-description">Dolphin Swim Experience</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, null, 'Snorkeling')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">11:00 AM</div>
                <div class="event-description">Snorkel in The Grand Reef</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, null, 'Lunch')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">12:30 PM</div>
                <div class="event-description">All-inclusive lunch</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, null, 'Aviary')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">2:00 PM</div>
                <div class="event-description">Explorer's Aviary & Wind-Away River</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, 'Discovery Cove, 6000 Discovery Cove Way, Orlando, FL', 'Westgate Lakes Resort, 9500 Turkey Lake Rd, Orlando, FL', 'Return to Resort')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">4:00 PM</div>
                <div class="event-description">Uber back to Westgate</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, null, 'Rest')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">5:00 PM</div>
                <div class="event-description">Rest & freshen up</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, 'Westgate Lakes Resort', 'Disney Springs, 1486 Buena Vista Dr, Lake Buena Vista, FL 32830', 'Disney Springs')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">7:00 PM</div>
                <div class="event-description">Uber to Disney Springs</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, 'Disney Springs Cirque du Soleil Theater', 'Cirque du Soleil')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">8:00 PM</div>
                <div class="event-description">Drawn to Life show</div>
            </div>
            <div class="action-buttons">
                <button class="action-btn" onclick="openUber('Westgate Lakes Resort', 'Discovery Cove, 6000 Discovery Cove Way, Orlando, FL 32821')">
                    🚗 Uber AM ($15-22)
                </button>
                <button class="action-btn secondary" onclick="openLyft('Westgate Lakes Resort', 'Discovery Cove, 6000 Discovery Cove Way, Orlando, FL 32821')">
                    🚙 Lyft AM ($14-20)
                </button>
                <button class="action-btn" onclick="openUber('Westgate Lakes Resort', 'Disney Springs, 1486 Buena Vista Dr, Lake Buena Vista, FL 32830')">
                    🚗 Uber PM ($18-30)
                </button>
                <button class="action-btn secondary" onclick="openLyft('Westgate Lakes Resort', 'Disney Springs, 1486 Buena Vista Dr, Lake Buena Vista, FL 32830')">
                    🚙 Lyft PM ($16-28)
                </button>
                <button class="action-btn" onclick="openMaps('Discovery Cove, Orlando, FL')">
                    📍 Discovery Cove
                </button>
            </div>
            <div class="day-notes">
                <div class="day-notes-label">
                    📝 Notes for Thursday
                    <span class="save-indicator" id="save-thursday">✓ Saved</span>
                </div>
                <textarea class="day-notes-input" 
                          id="notes-thursday" 
                          placeholder="Add notes, reminders, or special instructions for this day..."
                          onkeyup="saveNotes('thursday')"></textarea>
            </div>
        </div>

        <!-- Friday -->
        <div class="day-card" data-day="friday">
            <div class="day-header">
                <div class="day-title">🐬 SeaWorld Adventure</div>
                <div class="day-date">Friday 8/15</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, 'Westgate Lakes Resort', 'SeaWorld Orlando, 7007 Sea World Dr, Orlando, FL 32821', 'SeaWorld Arrival')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">2:00 PM</div>
                <div class="event-description">Uber to SeaWorld Orlando</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, 'Sharks Underwater Grill SeaWorld', 'Sharks Restaurant')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">3:00 PM</div>
                <div class="event-description">Sharks Underwater Grill (Magical Dining)</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, 'Mako SeaWorld Orlando', 'Mako Coaster')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">4:20 PM</div>
                <div class="event-description">Ride Mako, Infinity Falls, Ice Breaker</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, 'Orca Encounter SeaWorld', 'Orca Show')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">5:30 PM</div>
                <div class="event-description">Orca Encounter show</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, 'Bayside Stadium SeaWorld', 'Summer Spectacular')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">8:00 PM</div>
                <div class="event-description">Summer Spectacular & Ignite fireworks</div>
            </div>
            <div class="action-buttons">
                <button class="action-btn" onclick="openUber('Westgate Lakes Resort', 'SeaWorld Orlando, 7007 Sea World Dr, Orlando, FL 32821')">
                    🚗 Uber ($14-22)
                </button>
                <button class="action-btn secondary" onclick="openLyft('Westgate Lakes Resort', 'SeaWorld Orlando, 7007 Sea World Dr, Orlando, FL 32821')">
                    🚙 Lyft ($13-20)
                </button>
                <button class="action-btn" onclick="showTab('seaworld')">
                    🗺️ Park Map
                </button>
            </div>
            <div class="day-notes">
                <div class="day-notes-label">
                    📝 Notes for Friday
                    <span class="save-indicator" id="save-friday">✓ Saved</span>
                </div>
                <textarea class="day-notes-input" 
                          id="notes-friday" 
                          placeholder="Add notes, reminders, or special instructions for this day..."
                          onkeyup="saveNotes('friday')"></textarea>
            </div>
        </div>

        <!-- Saturday -->
        <div class="day-card" data-day="saturday">
            <div class="day-header">
                <div class="day-title">🏰 Disney Resort Hop</div>
                <div class="day-date">Saturday 8/16</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, 'Westgate Lakes Resort', 'Disney Animal Kingdom Lodge Kidani Village, 3701 Osceola Pkwy, Lake Buena Vista, FL 32830', 'Animal Kingdom Lodge')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">1:05 PM</div>
                <div class="event-description">Uber to Animal Kingdom Lodge (Sanaa)</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, 'Sanaa Restaurant Animal Kingdom Lodge', 'Sanaa Lunch')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">2:30 PM</div>
                <div class="event-description">Sanaa Lunch</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, 'Disney Animal Kingdom Lodge', 'Disney Polynesian Village Resort, 1600 Seven Seas Dr, Lake Buena Vista, FL 32830', 'Polynesian Resort')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">3:35 PM</div>
                <div class="event-description">Uber to Polynesian Resort</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, 'Pineapple Lanai Polynesian Resort', 'Dole Whip')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">4:15 PM</div>
                <div class="event-description">Dole Whip & beach time</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, 'Disney Contemporary Resort', 'Monorail')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">7:20 PM</div>
                <div class="event-description">Monorail to Contemporary</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, 'Chef Mickeys Contemporary Resort', 'Chef Mickeys')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">8:15 PM</div>
                <div class="event-description">Chef Mickey's Dinner</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, 'Magic Kingdom Fireworks Viewing', 'Fireworks')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">10:00 PM</div>
                <div class="event-description">Happily Ever After fireworks</div>
            </div>
            <div class="action-buttons">
                <button class="action-btn" onclick="openUber('Westgate Lakes Resort', 'Disney Animal Kingdom Lodge Kidani Village, 3701 Osceola Pkwy, Lake Buena Vista, FL 32830')">
                    🚗 Uber ($18-28)
                </button>
                <button class="action-btn secondary" onclick="openLyft('Westgate Lakes Resort', 'Disney Animal Kingdom Lodge Kidani Village, 3701 Osceola Pkwy, Lake Buena Vista, FL 32830')">
                    🚙 Lyft ($16-26)
                </button>
                <button class="action-btn" onclick="setReminder('Pack Night Kit: towels, wipes, ponchos, ear muffs, snacks')">
                    ⏰ Set Reminder
                </button>
            </div>
            <div class="day-notes">
                <div class="day-notes-label">
                    📝 Notes for Saturday
                    <span class="save-indicator" id="save-saturday">✓ Saved</span>
                </div>
                <textarea class="day-notes-input" 
                          id="notes-saturday" 
                          placeholder="Add notes, reminders, or special instructions for this day..."
                          onkeyup="saveNotes('saturday')"></textarea>
            </div>
        </div>

        <!-- Sunday -->
        <div class="day-card" data-day="sunday">
            <div class="day-header">
                <div class="day-title">🚂 Train & Beach Finale</div>
                <div class="day-date">Sunday 8/17</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, 'Westgate Lakes Resort', 'Orlando Amtrak, 1400 Sligh Blvd, Orlando, FL 32806', 'Amtrak Station')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">9:15 AM</div>
                <div class="event-description">Uber to Orlando Amtrak</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, 'Tampa Union Station', 'Train Ride')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">10:19 AM</div>
                <div class="event-description">Train to Tampa</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, 'Tampa Union Station, 601 N Nebraska Ave, Tampa, FL', 'Clearwater Beach Pier 60', 'Clearwater Beach')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">12:35 PM</div>
                <div class="event-description">Uber to Clearwater Beach</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, 'Frenchys Rockaway Grill, 7 Rockaway St, Clearwater Beach, FL', 'Frenchys')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">1:30 PM</div>
                <div class="event-description">Lunch at Frenchy's</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, 'Clearwater Beach Marina, 25 Causeway Blvd', 'Jet Ski')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">2:00 PM</div>
                <div class="event-description">Jet-ski adventure</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, 'Sea Screamer Clearwater Beach', 'Dolphin Tour')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">4:00 PM</div>
                <div class="event-description">Sea Screamer Dolphin Tour</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, null, 'Marina Cantina, 25 Causeway Blvd', 'Marina Cantina')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">6:15 PM</div>
                <div class="event-description">Marina Cantina dinner</div>
            </div>
            <div class="event-item" onclick="showEventOptions(event, 'Clearwater Beach', 'Tampa International Airport', 'Airport')">
                <div class="checkbox" onclick="toggleComplete(event)"></div>
                <div class="event-time">7:20 PM</div>
                <div class="event-description">Uber to Tampa Airport</div>
            </div>
            <div class="action-buttons">
                <button class="action-btn" onclick="openUber('Westgate Lakes Resort', 'Orlando Amtrak, 1400 Sligh Blvd, Orlando, FL 32806')">
                    🚗 Uber AM ($15-22)
                </button>
                <button class="action-btn secondary" onclick="openLyft('Westgate Lakes Resort', 'Orlando Amtrak, 1400 Sligh Blvd, Orlando, FL 32806')">
                    🚙 Lyft AM ($14-20)
                </button>
                <button class="action-btn" onclick="openMaps('Clearwater Beach, FL')">
                    📍 Beach Directions
                </button>
            </div>
            <div class="day-notes">
                <div class="day-notes-label">
                    📝 Notes for Sunday
                    <span class="save-indicator" id="save-sunday">✓ Saved</span>
                </div>
                <textarea class="day-notes-input" 
                          id="notes-sunday" 
                          placeholder="Add notes, reminders, or special instructions for this day..."
                          onkeyup="saveNotes('sunday')"></textarea>
            </div>
        </div>
    </div>

    <div class="content" id="games-tab" style="display: none;">
        <div class="game-selector">
            <button class="game-select-btn active" onclick="selectGame('merge')">🍎 Magic Fruit Merge</button>
            <button class="game-select-btn" onclick="selectGame('sudoku')">✨ Castle Sudoku</button>
            <button class="game-select-btn" onclick="selectGame('tetris')">🏰 Kingdom Blocks</button>
        </div>

        <!-- FRUIT MERGE GAME -->
        <div class="game-container" id="merge-game">
            <div class="game-header">
                <div class="game-title">🍎 Magic Fruit Merge</div>
                <div class="level-indicator">
                    <span>✨ Magic Level</span>
                    <span id="mergeLevel">1</span>
                </div>
            </div>
            
            <div class="game-stats">
                <div class="stat-item">
                    <span class="stat-label">Score</span>
                    <span class="stat-value" id="mergeScore">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Biggest</span>
                    <span class="stat-value" id="mergeBiggest">🍒</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Best</span>
                    <span class="stat-value" id="mergeBest">0</span>
                </div>
            </div>

            <div class="merge-container">
                <div class="next-fruit-display">
                    <span>Next:</span>
                    <span id="nextFruit" style="font-size: 30px;">🍒</span>
                </div>
                <canvas id="mergeCanvas" width="350" height="500"></canvas>
            </div>

            <div class="game-controls">
                <button class="game-btn" onclick="initMergeGame()">✨ New Magic</button>
                <button class="game-btn secondary" onclick="dropFruit()">⬇️ Drop Fruit</button>
            </div>

            <div class="fruit-evolution">
                <div style="font-size: 12px; color: #666; margin-bottom: 5px;">Evolution Chain:</div>
                <div>🍒→🍓→🍊→🍋→🍎→🍇→🍑→🍉→⭐</div>
            </div>
        </div>

        <!-- SUDOKU GAME -->
        <div class="game-container" id="sudoku-game" style="display: none;">
            <div class="game-header">
                <div class="game-title">✨ Castle Sudoku</div>
                <div class="level-indicator">
                    <span>Difficulty</span>
                    <select id="sudokuDifficulty" onchange="initSudoku()">
                        <option value="easy">⭐ Easy</option>
                        <option value="medium">⭐⭐ Medium</option>
                        <option value="hard">⭐⭐⭐ Hard</option>
                    </select>
                </div>
            </div>

            <div class="game-stats">
                <div class="stat-item">
                    <span class="stat-label">Time</span>
                    <span class="stat-value" id="sudokuTime">00:00</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Hints</span>
                    <span class="stat-value" id="sudokuHints">3</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Errors</span>
                    <span class="stat-value" id="sudokuErrors">0</span>
                </div>
            </div>

            <div class="sudoku-board" id="sudokuBoard"></div>

            <div class="number-buttons">
                <button class="num-btn" onclick="selectNumber(1)">1</button>
                <button class="num-btn" onclick="selectNumber(2)">2</button>
                <button class="num-btn" onclick="selectNumber(3)">3</button>
                <button class="num-btn" onclick="selectNumber(4)">4</button>
                <button class="num-btn" onclick="selectNumber(5)">5</button>
                <button class="num-btn" onclick="selectNumber(6)">6</button>
                <button class="num-btn" onclick="selectNumber(7)">7</button>
                <button class="num-btn" onclick="selectNumber(8)">8</button>
                <button class="num-btn" onclick="selectNumber(9)">9</button>
                <button class="num-btn special" onclick="selectNumber(0)">🗑️</button>
            </div>

            <div class="game-controls">
                <button class="game-btn" onclick="initSudoku()">🏰 New Puzzle</button>
                <button class="game-btn secondary" onclick="getSudokuHint()">💫 Magic Hint</button>
                <button class="game-btn secondary" onclick="checkSudoku()">✅ Check</button>
            </div>
        </div>

        <!-- TETRIS GAME -->
        <div class="game-container" id="tetris-game" style="display: none;">
            <div class="game-header">
                <div class="game-title">🏰 Kingdom Blocks</div>
                <div class="level-indicator">
                    <span>Castle Level</span>
                    <span id="tetrisLevel">1</span>
                </div>
            </div>

            <div class="game-stats">
                <div class="stat-item">
                    <span class="stat-label">Score</span>
                    <span class="stat-value" id="tetrisScore">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Lines</span>
                    <span class="stat-value" id="tetrisLines">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Best</span>
                    <span class="stat-value" id="tetrisBest">0</span>
                </div>
            </div>

            <div class="tetris-container">
                <canvas id="tetrisCanvas" width="300" height="600"></canvas>
                <div class="tetris-next">
                    <div style="font-size: 14px; margin-bottom: 10px;">Next Block:</div>
                    <canvas id="nextCanvas" width="100" height="100"></canvas>
                </div>
            </div>

            <div class="game-controls">
                <button class="game-btn" onclick="initTetris()">🏰 New Castle</button>
                <button class="game-btn secondary" onclick="pauseTetris()">⏸️ Pause</button>
            </div>

            <div class="tetris-instructions">
                <div style="font-size: 12px; color: #666;">
                    ← → Move | ↓ Drop | ↑ Rotate | Space: Hard Drop
                </div>
            </div>
        </div>

        <div class="game-message" id="gameMessage"></div>
    </div>

    <div class="content" id="seaworld-tab" style="display: none;">
        <div class="seaworld-section">
            <h2>🐬 SeaWorld Orlando - Your Route Map</h2>
            <p style="margin: 10px 0; opacity: 0.9; font-size: 14px;">Follow the red dotted path for the perfect day!</p>
            
            <div class="park-map-container">
                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzUwIiBoZWlnaHQ9IjUwMCIgdmlld0JveD0iMCAwIDM1MCA1MDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPCEtLSBCYWNrZ3JvdW5kIC0tPgogIDxyZWN0IHdpZHRoPSIzNTAiIGhlaWdodD0iNTAwIiBmaWxsPSIjOGJjMzRhIi8+CiAgCiAgPCEtLSBXYXRlciBhcmVhcyAtLT4KICA8ZWxsaXBzZSBjeD0iMTc1IiBjeT0iMjUwIiByeD0iMTIwIiByeT0iODAiIGZpbGw9IiM0YTkwZDkiIG9wYWNpdHk9IjAuNyIvPgogIDxlbGxpcHNlIGN4PSI4MCIgY3k9IjM1MCIgcng9IjYwIiByeT0iNDAiIGZpbGw9IiM0YTkwZDkiIG9wYWNpdHk9IjAuNyIvPgogIAogIDwhLS0gUGF0aHMgLS0+CiAgPHBhdGggZD0iTSAzMCA1MCBMIDgwIDEwMCBMIDEzMCAxNTAgTCAxNzUgMjAwIEwgMjIwIDE1MCBMIDI3MCAxMDAgTCAzMjAgNTAiIHN0cm9rZT0iI2Q0YWY2YSIgc3Ryb2tlLXdpZHRoPSI4IiBmaWxsPSJub25lIi8+CiAgPHBhdGggZD0iTSA1MCAyMDAgTCAxMDAgMjUwIEwgMTUwIDMwMCBMIDIwMCAzNTAgTCAyNTAgNDAwIEwgMzAwIDQ1MCIgc3Ryb2tlPSIjZDRhZjZhIiBzdHJva2Utd2lkdGg9IjgiIGZpbGw9Im5vbmUiLz4KICAKICA8IS0tIFJvdXRlIHBhdGggKGRvdHRlZCByZWQpIC0tPgogIDxwYXRoIGQ9Ik0gMzAgMzAgTCA3MCA5MCBMIDEzMCAxMjAgTCAxNzUgMTgwIEwgMjIwIDI0MCBMIDI2MCAzMDAgTCAyODAgMzgwIEwgMjUwIDQ1MCIgc3Ryb2tlPSIjZmY0NDQ0IiBzdHJva2Utd2lkdGg9IjMiIGZpbGw9Im5vbmUiIHN0cm9rZS1kYXNoYXJyYXk9IjggNCIvPgogIAogIDwhLS0gTnVtYmVyZWQgbG9jYXRpb25zIC0tPgogIDwhLS0gUGFya2luZyAtLT4KICA8Y2lyY2xlIGN4PSIzMCIgY3k9IjMwIiByPSIyMCIgZmlsbD0id2hpdGUiIHN0cm9rZT0iIzMzMyIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgPHRleHQgeD0iMzAiIHk9IjM3IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjE4IiBmb250LXdlaWdodD0iYm9sZCI+UDwvdGV4dD4KICAKICA8IS0tIDIuIEVudHJhbmNlIC0tPgogIDxjaXJjbGUgY3g9IjcwIiBjeT0iOTAiIHI9IjE4IiBmaWxsPSIjZmY0NDQ0IiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8dGV4dCB4PSI3MCIgeT0iOTciIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iYm9sZCI+MjwvdGV4dD4KICAKICA8IS0tIDMuIFNoYXJrcyBSZXN0YXVyYW50IC0tPgogIDxjaXJjbGUgY3g9IjEzMCIgY3k9IjEyMCIgcj0iMTgiIGZpbGw9IiM0YTkwZDkiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMiIvPgogIDx0ZXh0IHg9IjEzMCIgeT0iMTI3IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSJ3aGl0ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9ImJvbGQiPjc8L3RleHQ+CiAgCiAgPCEtLSA0LiBNYWtvIC0tPgogIDxjaXJjbGUgY3g9IjE3NSIgY3k9IjE4MCIgcj0iMTgiIGZpbGw9IiNmZjcyMDAiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMiIvPgogIDx0ZXh0IHg9IjE3NSIgeT0iMTg3IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSJ3aGl0ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9ImJvbGQiPjQ8L3RleHQ+CiAgCiAgPCEtLSA1LiBPcmNhIEVuY291bnRlciAtLT4KICA8Y2lyY2xlIGN4PSIyMjAiIGN5PSIyNDAiIHI9IjE4IiBmaWxsPSIjMDA5Njg4IiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8dGV4dCB4PSIyMjAiIHk9IjI0NyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0id2hpdGUiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSJib2xkIj4yPC90ZXh0PgogIAogIDwhLS0gNi4gSWNlIEJyZWFrZXIvSW5maW5pdHkgRmFsbHMgLS0+CiAgPGNpcmNsZSBjeD0iMjYwIiBjeT0iMzAwIiByPSIxOCIgZmlsbD0iIzAwYmNkNCIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgPHRleHQgeD0iMjYwIiB5PSIzMDciIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iYm9sZCI+NjwvdGV4dD4KICAKICA8IS0tIDcuIEJheXNpZGUgU3RhZGl1bSAtLT4KICA8Y2lyY2xlIGN4PSIyNTAiIGN5PSI0NTAiIHI9IjE4IiBmaWxsPSIjZmY0MDgxIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8dGV4dCB4PSIyNTAiIHk9IjQ1NyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0id2hpdGUiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSJib2xkIj41PC90ZXh0PgogIAogIDwhLS0gUmlkZSBpY29ucyAtLT4KICA8dGV4dCB4PSIxNzUiIHk9IjE2MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIzMCI+8J+OoiA8L3RleHQ+CiAgPHRleHQgeD0iMjIwIiB5PSIyMjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMzAiPvCfkKw8L3RleHQ+CiAgPHRleHQgeD0iMjYwIiB5PSIyODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMzAiPuKEvO+4jzwvdGV4dD4KICA8dGV4dCB4PSIxMzAiIHk9IjEwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIzMCI+8J+miDwvdGV4dD4KICA8dGV4dCB4PSIyNTAiIHk9IjQzMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIzMCI+8J+OhjwvdGV4dD4KPC9zdmc+" 
                     alt="SeaWorld Route Map" 
                     class="seaworld-map-img"
                     onclick="zoomMap(this)">
                
                <div class="map-legend">
                    <div class="legend-item">
                        <span class="legend-dot" style="background: white; border: 2px solid #333;">P</span>
                        <span>Parking - Show Magical Dining reservation for FREE parking!</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot" style="background: #ff4444;">2</span>
                        <span>Main Entrance - Get escort to Sharks</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot" style="background: #4a90d9;">7</span>
                        <span>3:00 PM - Sharks Underwater Grill</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot" style="background: #ff7200;">4</span>
                        <span>4:20 PM - Mako (ride first!)</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot" style="background: #00bcd4;">6</span>
                        <span>4:45 PM - Ice Breaker/Infinity Falls</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot" style="background: #009688;">2</span>
                        <span>5:30 PM - Orca Encounter</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot" style="background: #ff4081;">5</span>
                        <span>8:00 PM - Bayside Stadium (Summer Spectacular)</span>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="action-btn" onclick="openUber('Current Location', 'SeaWorld Orlando, 7007 Sea World Dr, Orlando, FL 32821')">
                    🚗 Uber to SeaWorld
                </button>
                <button class="action-btn secondary" onclick="openLyft('Current Location', 'SeaWorld Orlando, 7007 Sea World Dr, Orlando, FL 32821')">
                    🚙 Lyft to SeaWorld
                </button>
                <button class="action-btn" onclick="openMaps('SeaWorld Orlando')">
                    📍 Get Directions
                </button>
                <button class="action-btn" onclick="alert('Opening SeaWorld app for wait times...')">
                    ⏱️ Check Wait Times
                </button>
            </div>
        </div>

        <div class="day-card">
            <h3>🎢 Your SeaWorld Plan (Friday 8/15)</h3>
            
            <div class="alert-box">
                <strong>🎟️ FREE Parking Tip:</strong> Show your Magical Dining reservation at the toll plaza for free parking and in-park escort! Have reservation ready on phone.
            </div>

            <div class="event-item">
                <div class="event-time">3:00 PM</div>
                <div class="event-description">🦈 Sharks Underwater Grill - Magical Dining Menu</div>
            </div>
            <div class="event-item">
                <div class="event-time">4:20 PM</div>
                <div class="event-description">🎢 Hit Mako FIRST (shortest lines at this time)</div>
            </div>
            <div class="event-item">
                <div class="event-time">4:45 PM</div>
                <div class="event-description">❄️ Infinity Falls or Ice Breaker (if lines < 25 min)</div>
            </div>
            <div class="event-item">
                <div class="event-time">5:30 PM</div>
                <div class="event-description">🐬 Orca Encounter - Arrive 15-20 min early for best seats!</div>
            </div>
            <div class="event-item">
                <div class="event-time">8:00 PM</div>
                <div class="event-description">🎆 Summer Spectacular at Bayside Stadium</div>
            </div>
            <div class="event-item">
                <div class="event-time">9:30 PM</div>
                <div class="event-description">🎇 Ignite Fireworks finale with drones!</div>
            </div>
            
            <div class="alert-box" style="background: #fff3cd; border-color: #ffc107;">
                <strong>💳 Gift Card Tip:</strong> Discovery Cove/SeaWorld gift cards work at all restaurants and shops across United Parks & Resorts properties!
            </div>
        </div>
    </div>

    <div class="content" id="reminders-tab" style="display: none;">
        <div class="day-card">
            <h3>⏰ Active Reminders</h3>
            <div id="reminders-list">
                <p style="color: #888; text-align: center;">No reminders set yet</p>
            </div>
            <div class="action-buttons">
                <button class="action-btn" onclick="showReminderModal()">
                    ➕ Add Reminder
                </button>
            </div>
        </div>

        <div class="day-card">
            <h3>📋 Pre-Trip Checklist</h3>
            <div class="event-item" onclick="toggleComplete(this)">
                <div class="checkbox"></div>
                <div class="event-description">Check in for Spirit flight</div>
            </div>
            <div class="event-item" onclick="toggleComplete(this)">
                <div class="checkbox"></div>
                <div class="event-description">Pack Night Kit for Saturday</div>
            </div>
            <div class="event-item" onclick="toggleComplete(this)">
                <div class="checkbox"></div>
                <div class="event-description">Confirm all dinner reservations</div>
            </div>
            <div class="event-item" onclick="toggleComplete(this)">
                <div class="checkbox"></div>
                <div class="event-description">Download park apps</div>
            </div>
            <div class="event-item" onclick="toggleComplete(this)">
                <div class="checkbox"></div>
                <div class="event-description">Charge portable batteries</div>
            </div>
        </div>
    </div>
</div>

<div class="ai-chat">
    <button class="ai-fab" onclick="toggleChat()">💬</button>
</div>

<div class="chat-window" id="chatWindow">
    <div class="chat-header">
        <h3>AI Travel Assistant</h3>
        <button onclick="toggleChat()" style="background: none; border: none; color: white; font-size: 20px; cursor: pointer;">✕</button>
    </div>
    <div class="chat-messages" id="chatMessages">
        <div class="chat-message ai">
            Hi! I'm your AI travel assistant. I can help you update your itinerary, answer questions about your trip, or provide recommendations. What would you like to know?
        </div>
    </div>
    <div class="chat-input-container">
        <input type="text" class="chat-input" id="chatInput" placeholder="Ask me anything..." onkeypress="if(event.key==='Enter') sendMessage()">
        <button class="chat-send" onclick="sendMessage()">Send</button>
    </div>
</div>

<div class="modal-overlay" id="modalOverlay" onclick="closeModals()"></div>
<div class="reminder-modal" id="reminderModal">
    <h3>Set Reminder</h3>
    <input type="text" class="reminder-input" id="reminderTitle" placeholder="Reminder title...">
    <input type="datetime-local" class="reminder-input" id="reminderTime">
    <div class="reminder-buttons">
        <button class="action-btn" onclick="closeReminderModal()">Cancel</button>
        <button class="action-btn" onclick="saveReminder()">Save</button>
    </div>
</div>

<div class="event-options-modal" id="eventOptionsModal">
    <h3 id="eventOptionsTitle">Event Options</h3>
    <div class="event-info" id="eventOptionsInfo"></div>
    <div id="eventOptionsButtons"></div>
    <button class="event-option-btn close" onclick="closeEventOptions()">Close</button>
</div>

<div class="install-modal" id="installModal">
    <h3>📱 Install Vacation App</h3>
    <div class="install-instructions" id="installInstructions">
        <div class="install-section">
            <h4>For iPhone/iPad:</h4>
            <ol>
                <li>Copy this page's URL</li>
                <li>Open <strong>Safari</strong> browser (must be Safari!)</li>
                <li>Paste the URL and go</li>
                <li>Tap the Share button <span style="font-size: 20px;">↗️</span></li>
                <li>Scroll down and tap <strong>"Add to Home Screen"</strong></li>
                <li>Tap <strong>"Add"</strong></li>
            </ol>
        </div>
        <div class="install-section">
            <h4>For Android:</h4>
            <ol>
                <li>Copy this page's URL</li>
                <li>Open <strong>Chrome</strong> browser</li>
                <li>Paste the URL and go</li>
                <li>Tap menu <span style="font-size: 20px;">⋮</span></li>
                <li>Select <strong>"Add to Home Screen"</strong></li>
                <li>Tap <strong>"Add"</strong></li>
            </ol>
        </div>
        <div class="install-section" style="background: #e3f2fd; padding: 10px; border-radius: 8px; margin-top: 15px;">
            <p style="margin: 0; font-size: 13px;"><strong>💡 Tip:</strong> Once installed, the app works offline and opens full-screen just like a real app!</p>
        </div>
    </div>
    <button class="event-option-btn close" onclick="closeInstallModal()" style="margin-top: 20px;">Got it!</button>
</div>

<script>
    // Global variables
    let currentTab = 'itinerary';
    let completedTasks = JSON.parse(localStorage.getItem('vacationTasks') || '[]');
    let reminders = JSON.parse(localStorage.getItem('vacationReminders') || '[]');
    let dayNotes = JSON.parse(localStorage.getItem('vacationDayNotes') || '{}');
    let deferredPrompt = null;
    
    // Game variables
    let currentGame = 'merge';
    
    // Merge game variables
    let mergeFruits = [];
    let mergeScore = 0;
    let mergeCanvas, mergeCtx;
    let nextFruitType = 0;
    let canDrop = true;
    const fruitTypes = ['🍒', '🍓', '🍊', '🍋', '🍎', '🍇', '🍑', '🍉', '⭐'];
    const fruitSizes = [20, 25, 30, 35, 40, 45, 50, 60, 80];
    let dropX = 175;
    
    // Sudoku variables
    let sudokuBoard = [];
    let sudokuSolution = [];
    let selectedSudokuCell = null;
    let sudokuErrors = 0;
    let sudokuHints = 3;
    let sudokuTimer = null;
    let sudokuTime = 0;
    
    // Tetris variables
    let tetrisBoard = [];
    let currentPiece = null;
    let nextPiece = null;
    let tetrisScore = 0;
    let tetrisLines = 0;
    let tetrisLevel = 1;
    let tetrisCanvas, tetrisCtx, nextCtx;
    let tetrisInterval = null;
    let tetrisPaused = false;
    const tetrisColors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f7dc6f', '#bb8fce', '#85c88a', '#f8b500'];
    const tetrisPieces = [
        [[1,1,1,1]], // I
        [[1,1],[1,1]], // O
        [[0,1,0],[1,1,1]], // T
        [[1,0,0],[1,1,1]], // L
        [[0,0,1],[1,1,1]], // J
        [[0,1,1],[1,1,0]], // S
        [[1,1,0],[0,1,1]]  // Z
    ];
    
    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
        try {
            updateCountdown();
            updateProgress();
            loadCompletedTasks();
            loadReminders();
            loadNotes();
            setInterval(updateCountdown, 1000);
            
            // Initialize weather
            updateWeather();
            setInterval(updateWeather, 600000); // Update every 10 minutes
            
            // Ensure install button is visible
            const installBtn = document.getElementById('installBtn');
            if (installBtn) {
                installBtn.style.display = 'flex';
                installBtn.classList.remove('hidden');
            }
            
            // Initialize canvases
            mergeCanvas = document.getElementById('mergeCanvas');
            if (mergeCanvas) {
                mergeCtx = mergeCanvas.getContext('2d');
                mergeCanvas.addEventListener('mousemove', handleMergeMouseMove);
                mergeCanvas.addEventListener('click', handleMergeClick);
                mergeCanvas.addEventListener('touchmove', handleMergeTouchMove);
                mergeCanvas.addEventListener('touchend', handleMergeTouchEnd);
            }
            
            tetrisCanvas = document.getElementById('tetrisCanvas');
            if (tetrisCanvas) {
                tetrisCtx = tetrisCanvas.getContext('2d');
            }
            
            const nextCanvas = document.getElementById('nextCanvas');
            if (nextCanvas) {
                nextCtx = nextCanvas.getContext('2d');
            }
            
            // Add keyboard controls for Tetris
            document.addEventListener('keydown', handleTetrisKey);
            
            // Initialize PWA
            initPWA();
            
            // Prevent double-tap zoom on iOS
            let lastTouchEnd = 0;
            document.addEventListener('touchend', (e) => {
                const now = Date.now();
                if (now - lastTouchEnd <= 300) {
                    e.preventDefault();
                }
                lastTouchEnd = now;
            }, false);
            
            // Add swipe gestures for tab navigation
            let touchStartX = 0;
            let touchEndX = 0;
            
            document.addEventListener('touchstart', (e) => {
                touchStartX = e.changedTouches[0].screenX;
            }, false);
            
            document.addEventListener('touchend', (e) => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            }, false);
            
            function handleSwipe() {
                const swipeThreshold = 50;
                const diff = touchStartX - touchEndX;
                
                if (Math.abs(diff) > swipeThreshold) {
                    const tabs = ['itinerary', 'seaworld', 'reminders', 'games'];
                    const currentIndex = tabs.indexOf(currentTab);
                    
                    if (diff > 0 && currentIndex < tabs.length - 1) {
                        // Swipe left - next tab
                        const nextTab = tabs[currentIndex + 1];
                        const nextTabBtn = document.querySelectorAll('.nav-tab')[currentIndex + 1];
                        if (nextTabBtn) nextTabBtn.click();
                    } else if (diff < 0 && currentIndex > 0) {
                        // Swipe right - previous tab
                        const prevTab = tabs[currentIndex - 1];
                        const prevTabBtn = document.querySelectorAll('.nav-tab')[currentIndex - 1];
                        if (prevTabBtn) prevTabBtn.click();
                    }
                }
            }
        } catch (error) {
            console.log('Initialization error:', error);
        }
    });
    
    // Weather functions
    function updateWeather() {
        try {
            // Using simulated Orlando weather for demo
            const weatherData = {
                temp: Math.floor(75 + Math.random() * 15),
                feels: Math.floor(80 + Math.random() * 15),
                humidity: Math.floor(65 + Math.random() * 20),
                conditions: ['Sunny', 'Partly Cloudy', 'Mostly Sunny', 'Scattered Clouds'][Math.floor(Math.random() * 4)],
                uv: Math.random() > 0.5 ? 'High' : 'Very High'
            };
            
            const tempEl = document.getElementById('weatherTemp');
            const descEl = document.getElementById('weatherDesc');
            const feelsEl = document.getElementById('weatherFeels');
            const humidityEl = document.getElementById('weatherHumidity');
            const uvEl = document.getElementById('weatherUV');
            
            if (tempEl) tempEl.textContent = weatherData.temp + '°F';
            if (descEl) descEl.textContent = weatherData.conditions;
            if (feelsEl) feelsEl.textContent = weatherData.feels + '°F';
            if (humidityEl) humidityEl.textContent = weatherData.humidity + '%';
            if (uvEl) uvEl.textContent = weatherData.uv;
        } catch (error) {
            console.log('Weather update error:', error);
        }
    }
    
    // Map zoom function
    function zoomMap(img) {
        img.classList.toggle('zoomed');
        if (img.classList.contains('zoomed')) {
            const overlay = document.createElement('div');
            overlay.className = 'map-overlay';
            overlay.style.cssText = 'position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);z-index:999;';
            overlay.onclick = () => {
                img.classList.remove('zoomed');
                overlay.remove();
            };
            document.body.appendChild(overlay);
        } else {
            const overlay = document.querySelector('.map-overlay');
            if (overlay) overlay.remove();
        }
    }
    
    // Touch handlers for merge game
    function handleMergeTouchMove(e) {
        if (!canDrop) return;
        e.preventDefault();
        const rect = mergeCanvas.getBoundingClientRect();
        const touch = e.touches[0];
        dropX = touch.clientX - rect.left;
        dropX = Math.max(30, Math.min(320, dropX));
        renderMergeGame();
    }
    
    function handleMergeTouchEnd(e) {
        if (!canDrop) return;
        e.preventDefault();
        dropFruit();
    }
    
    // PWA Installation
    function initPWA() {
        try {
            // Always show the install button
            const installBtn = document.getElementById('installBtn');
            if (installBtn) {
                installBtn.classList.remove('hidden');
            }
            
            // Handle install prompt if available
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
            });
            
            // Check if already installed as standalone
            if (window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone) {
                // App is already installed, hide the button
                if (installBtn) installBtn.classList.add('hidden');
            }
        } catch (error) {
            console.log('PWA init error:', error);
            // Show install button as fallback
            const installBtn = document.getElementById('installBtn');
            if (installBtn) installBtn.classList.remove('hidden');
        }
    }
    
    function installApp() {
        console.log('Install button clicked');
        const modal = document.getElementById('installModal');
        const overlay = document.getElementById('modalOverlay');
        
        if (modal && overlay) {
            modal.style.display = 'block';
            overlay.style.display = 'block';
            console.log('Modal shown');
        } else {
            console.log('Modal elements not found');
            // Fallback: Create a simple alert-like div
            const msg = document.createElement('div');
            msg.innerHTML = `
                <div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); 
                            background: white; padding: 20px; border-radius: 10px; 
                            box-shadow: 0 10px 30px rgba(0,0,0,0.3); z-index: 9999; max-width: 90%; width: 350px;">
                    <h3 style="margin-bottom: 15px;">📱 Install App</h3>
                    <p style="line-height: 1.6; margin-bottom: 15px;">
                        <strong>For iPhone:</strong><br>
                        1. Copy this page URL<br>
                        2. Open Safari (must be Safari!)<br>
                        3. Paste URL and go<br>
                        4. Tap Share ↗️<br>
                        5. "Add to Home Screen"<br><br>
                        
                        <strong>For Android:</strong><br>
                        1. Copy this page URL<br>
                        2. Open Chrome<br>
                        3. Menu ⋮ → "Add to Home Screen"
                    </p>
                    <button onclick="this.parentElement.remove()" 
                            style="background: #667eea; color: white; border: none; 
                                   padding: 10px 20px; border-radius: 5px; cursor: pointer;">
                        Got it!
                    </button>
                </div>
            `;
            document.body.appendChild(msg);
        }
    }
    
    function showInstallModal() {
        const modal = document.getElementById('installModal');
        const overlay = document.getElementById('modalOverlay');
        
        if (modal && overlay) {
            modal.style.display = 'block';
            overlay.style.display = 'block';
        }
    }
    
    function closeInstallModal() {
        const modal = document.getElementById('installModal');
        const overlay = document.getElementById('modalOverlay');
        
        if (modal) modal.style.display = 'none';
        if (overlay) overlay.style.display = 'none';
    }

    // Tab navigation
    function showTab(tabName) {
        try {
            document.querySelectorAll('.content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            const targetTab = document.getElementById(tabName + '-tab');
            if (targetTab) {
                targetTab.style.display = 'block';
            }
            
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            if (event && event.target) {
                event.target.classList.add('active');
            }
            
            currentTab = tabName;
            
            // Show/hide day selector based on tab
            const daySelector = document.getElementById('daySelector');
            if (daySelector) {
                if (tabName === 'itinerary') {
                    daySelector.style.display = 'block';
                } else {
                    daySelector.style.display = 'none';
                }
            }
            
            // Initialize first game if switching to games tab
            if (tabName === 'games') {
                if (!mergeCanvas) {
                    mergeCanvas = document.getElementById('mergeCanvas');
                    if (mergeCanvas) {
                        mergeCtx = mergeCanvas.getContext('2d');
                        mergeCanvas.addEventListener('mousemove', handleMergeMouseMove);
                        mergeCanvas.addEventListener('click', handleMergeClick);
                    }
                }
                if (!tetrisCanvas) {
                    tetrisCanvas = document.getElementById('tetrisCanvas');
                    if (tetrisCanvas) {
                        tetrisCtx = tetrisCanvas.getContext('2d');
                    }
                    const nextCanvas = document.getElementById('nextCanvas');
                    if (nextCanvas) {
                        nextCtx = nextCanvas.getContext('2d');
                    }
                }
                if (mergeFruits.length === 0) {
                    initMergeGame();
                }
            }
        } catch (error) {
            console.log('Tab navigation error:', error);
        }
    }

    // Toggle task completion
    function toggleComplete(event) {
        event.stopPropagation();
        const element = event.target.closest('.event-item');
        const checkbox = element.querySelector('.checkbox');
        checkbox.classList.toggle('checked');
        element.classList.toggle('completed');
        
        const taskId = element.querySelector('.event-description').textContent;
        if (checkbox.classList.contains('checked')) {
            completedTasks.push(taskId);
            if (Math.random() > 0.7) { // 30% chance for confetti
                createConfetti();
            }
        } else {
            completedTasks = completedTasks.filter(t => t !== taskId);
        }
        
        localStorage.setItem('vacationTasks', JSON.stringify(completedTasks));
        updateProgress();
    }

    // Show event options modal
    function showEventOptions(event, pickup, dropoff, eventName, flightNumber) {
        event.stopPropagation();
        
        // Don't show modal if clicking on checkbox
        if (event.target.classList.contains('checkbox')) {
            return;
        }
        
        const modal = document.getElementById('eventOptionsModal');
        const overlay = document.getElementById('modalOverlay');
        const title = document.getElementById('eventOptionsTitle');
        const info = document.getElementById('eventOptionsInfo');
        const buttons = document.getElementById('eventOptionsButtons');
        
        const eventItem = event.currentTarget;
        const time = eventItem.querySelector('.event-time').textContent;
        const description = eventItem.querySelector('.event-description').textContent;
        
        title.textContent = eventName || description;
        info.textContent = `${time} - ${description}`;
        
        buttons.innerHTML = '';
        
        // Add flight status button if flight number is provided
        if (flightNumber) {
            const flightBtn = document.createElement('button');
            flightBtn.className = 'event-option-btn';
            flightBtn.innerHTML = '✈️ Check Flight Status';
            flightBtn.onclick = () => {
                checkFlightStatus(flightNumber);
                closeEventOptions();
            };
            buttons.appendChild(flightBtn);
        }
        
        // Add Uber button if pickup and dropoff are provided
        if (pickup && dropoff) {
            const uberBtn = document.createElement('button');
            uberBtn.className = 'event-option-btn';
            uberBtn.innerHTML = '🚗 Book Uber';
            uberBtn.onclick = () => {
                openUber(pickup, dropoff);
                closeEventOptions();
            };
            buttons.appendChild(uberBtn);
            
            // Add Lyft button
            const lyftBtn = document.createElement('button');
            lyftBtn.className = 'event-option-btn secondary';
            lyftBtn.innerHTML = '🚙 Book Lyft';
            lyftBtn.onclick = () => {
                openLyft(pickup, dropoff);
                closeEventOptions();
            };
            buttons.appendChild(lyftBtn);
        }
        
        // Add Maps button if dropoff or eventName is provided
        if (dropoff || eventName) {
            const mapsBtn = document.createElement('button');
            mapsBtn.className = 'event-option-btn secondary';
            mapsBtn.innerHTML = '📍 Get Directions';
            mapsBtn.onclick = () => {
                openMaps(dropoff || eventName);
                closeEventOptions();
            };
            buttons.appendChild(mapsBtn);
        }
        
        // Add reminder button
        const reminderBtn = document.createElement('button');
        reminderBtn.className = 'event-option-btn secondary';
        reminderBtn.innerHTML = '⏰ Set Reminder';
        reminderBtn.onclick = () => {
            setReminder(`${time} - ${description}`);
            closeEventOptions();
        };
        buttons.appendChild(reminderBtn);
        
        // Add complete button
        const completeBtn = document.createElement('button');
        completeBtn.className = 'event-option-btn';
        completeBtn.innerHTML = eventItem.classList.contains('completed') ? '↩️ Mark Incomplete' : '✅ Mark Complete';
        completeBtn.onclick = () => {
            toggleComplete({target: eventItem.querySelector('.checkbox'), stopPropagation: () => {}});
            closeEventOptions();
        };
        buttons.appendChild(completeBtn);
        
        modal.style.display = 'block';
        overlay.style.display = 'block';
    }

    // Check flight status
    function checkFlightStatus(flightNumber) {
        // Open FlightAware or similar service
        const flightStatusUrl = `https://www.flightstats.com/v2/flight-tracker/${flightNumber}`;
        window.open(flightStatusUrl, '_blank');
        
        // Alternative: Could also use FlightAware
        // const flightAwareUrl = `https://flightaware.com/live/flight/${flightNumber}`;
        // window.open(flightAwareUrl, '_blank');
    }

    // Save notes for a specific day
    function saveNotes(day) {
        const notesTextarea = document.getElementById(`notes-${day}`);
        const saveIndicator = document.getElementById(`save-${day}`);
        
        if (notesTextarea) {
            dayNotes[day] = notesTextarea.value;
            localStorage.setItem('vacationDayNotes', JSON.stringify(dayNotes));
            
            // Show save indicator
            if (saveIndicator) {
                saveIndicator.classList.add('show');
                setTimeout(() => {
                    saveIndicator.classList.remove('show');
                }, 2000);
            }
        }
    }

    // Load all notes
    function loadNotes() {
        const days = ['tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
        days.forEach(day => {
            const notesTextarea = document.getElementById(`notes-${day}`);
            if (notesTextarea && dayNotes[day]) {
                notesTextarea.value = dayNotes[day];
            }
        });
    }

    // Close event options modal
    function closeEventOptions() {
        document.getElementById('eventOptionsModal').style.display = 'none';
        document.getElementById('modalOverlay').style.display = 'none';
    }

    // Close all modals
    function closeModals() {
        closeEventOptions();
        closeReminderModal();
        closeInstallModal();
    }

    // Filter by day
    function filterByDay(day) {
        const allCards = document.querySelectorAll('#itinerary-tab .day-card');
        
        if (day === 'all') {
            allCards.forEach(card => card.classList.remove('hidden'));
        } else if (day === 'today') {
            // Get today's day of week
            const today = new Date();
            const dayOfWeek = today.getDay();
            const tripDays = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
            const todayString = tripDays[dayOfWeek];
            
            allCards.forEach(card => {
                if (card.dataset.day === todayString) {
                    card.classList.remove('hidden');
                } else {
                    card.classList.add('hidden');
                }
            });
        } else {
            allCards.forEach(card => {
                if (card.dataset.day === day) {
                    card.classList.remove('hidden');
                } else {
                    card.classList.add('hidden');
                }
            });
        }
    }

    // Create confetti effect
    function createConfetti() {
        const colors = ['#ff5722', '#667eea', '#764ba2', '#00bcd4', '#ff4081', '#ffc107'];
        for (let i = 0; i < 50; i++) {
            setTimeout(() => {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * window.innerWidth + 'px';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 4000);
            }, i * 30);
        }
    }

    // Open Uber with pre-filled addresses
    function openUber(pickup, dropoff) {
        const uberUrl = `uber://?action=setPickup&pickup=my_location&dropoff[formatted_address]=${encodeURIComponent(dropoff)}`;
        const webUrl = `https://m.uber.com/ul/?action=setPickup&pickup=my_location&dropoff[formatted_address]=${encodeURIComponent(dropoff)}`;
        
        // Try to open app first, fallback to web
        window.location.href = uberUrl;
        setTimeout(() => {
            window.open(webUrl, '_blank');
        }, 500);
    }
    
    // Open Lyft with pre-filled addresses
    function openLyft(pickup, dropoff) {
        const lyftUrl = `lyft://ridetype?id=lyft&pickup[latitude]=28.5383&pickup[longitude]=-81.3792&destination[address]=${encodeURIComponent(dropoff)}`;
        const webUrl = `https://www.lyft.com/ride?id=lyft&pickup[address]=${encodeURIComponent(pickup)}&destination[address]=${encodeURIComponent(dropoff)}`;
        
        // Try to open app first, fallback to web
        window.location.href = lyftUrl;
        setTimeout(() => {
            window.open(webUrl, '_blank');
        }, 500);
    }

    // Open Google Maps
    function openMaps(destination) {
        const mapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(destination)}`;
        window.open(mapsUrl, '_blank');
    }

    // AI Chat functionality
    function toggleChat() {
        const chatWindow = document.getElementById('chatWindow');
        chatWindow.style.display = chatWindow.style.display === 'flex' ? 'none' : 'flex';
    }

    function sendMessage() {
        const input = document.getElementById('chatInput');
        const message = input.value.trim();
        if (!message) return;

        const messagesContainer = document.getElementById('chatMessages');
        
        // Add user message
        const userMsg = document.createElement('div');
        userMsg.className = 'chat-message user';
        userMsg.textContent = message;
        messagesContainer.appendChild(userMsg);
        
        // Simulate AI response
        setTimeout(() => {
            const aiMsg = document.createElement('div');
            aiMsg.className = 'chat-message ai';
            aiMsg.textContent = getAIResponse(message);
            messagesContainer.appendChild(aiMsg);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }, 1000);
        
        input.value = '';
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    function getAIResponse(message) {
        const msg = message.toLowerCase();
        
        if (msg.includes('seaworld')) {
            return "For SeaWorld, remember to show your Magical Dining reservation at the toll plaza for free parking! The must-do rides are Mako, Ice Breaker, and Infinity Falls. Don't miss the Orca Encounter at 5:30 PM!";
        } else if (msg.includes('discovery cove')) {
            return "Discovery Cove on Thursday is going to be amazing! You have the dolphin swim at 9:30 AM, snorkeling at The Grand Reef at 11 AM, and all-inclusive lunch. Don't forget sunscreen and an underwater camera!";
        } else if (msg.includes('flight')) {
            return "Your Spirit flight NK 1841 departs BOS at 8:35 PM on Tuesday. Click on the flight event to check real-time status. Remember Spirit's carry-on policies and arrive at least 2 hours early!";
        } else if (msg.includes('uber') || msg.includes('lyft') || msg.includes('ride')) {
            return "I can help you compare rides! Click any event to see both Uber and Lyft options with price estimates. Generally, Lyft is $2-3 cheaper per ride. For SeaWorld: Uber $14-22, Lyft $13-20. The app pre-fills all addresses for both services!";
        } else if (msg.includes('download') || msg.includes('install')) {
            return "Great news! Click the 'Download App' button in the top-right corner to install this as an app on your phone. On iOS, you'll need to use the Share button and 'Add to Home Screen'. Once installed, it works offline and looks just like a native app!";
        } else if (msg.includes('game')) {
            return "I've added three magical games for you! Magic Fruit Merge where fruits combine to grow bigger, Castle Sudoku with a Disney theme, and Kingdom Blocks (Tetris-style). Perfect for flights and waiting in lines!";
        } else if (msg.includes('notes')) {
            return "Each day has a notes section at the bottom where you can add reminders or special instructions. Your notes save automatically as you type and persist even if you close the app!";
        } else if (msg.includes('dinner') || msg.includes('food')) {
            return "You have amazing dining planned! Pirates Dinner (Wed), Sanaa with savanna views (Sat), Chef Mickey's (Sat), and Sharks Underwater Grill at SeaWorld (Fri). All reservations are confirmed!";
        } else if (msg.includes('pack')) {
            return "Don't forget your Night Kit for Saturday: towels, wipes, ponchos, ear muffs for Lyric, electrolytes, light jacket, and snacks in Ziplocs. Also bring portable chargers!";
        } else if (msg.includes('update') || msg.includes('change')) {
            return "I can help you adjust your plans! Use the notes section for each day to track changes, set reminders for any activities, or use the checkboxes to track your progress.";
        } else {
            return "I'm here to help with your Orlando vacation! I can compare Uber/Lyft prices, provide park info, check flight status, help with the download button to install as an app, or answer questions about your itinerary. Plus, try the games tab! What would you like to know?";
        }
    }

    // Reminder functionality
    function showReminderModal() {
        document.getElementById('modalOverlay').style.display = 'block';
        document.getElementById('reminderModal').style.display = 'block';
        
        // Set default time to tomorrow at 9 AM
        const tomorrow = new Date();
        tomorrow.setDate(tomorrow.getDate() + 1);
        tomorrow.setHours(9, 0, 0, 0);
        document.getElementById('reminderTime').value = tomorrow.toISOString().slice(0, 16);
    }

    function closeReminderModal() {
        document.getElementById('modalOverlay').style.display = 'none';
        document.getElementById('reminderModal').style.display = 'none';
    }

    function setReminder(text) {
        document.getElementById('reminderTitle').value = text || '';
        showReminderModal();
    }

    function saveReminder() {
        const title = document.getElementById('reminderTitle').value;
        const time = document.getElementById('reminderTime').value;
        
        if (!title || !time) {
            alert('Please enter both title and time for the reminder');
            return;
        }
        
        const reminder = {
            id: Date.now(),
            title: title,
            time: time,
            active: true
        };
        
        reminders.push(reminder);
        localStorage.setItem('vacationReminders', JSON.stringify(reminders));
        loadReminders();
        closeReminderModal();
        
        // Show notification
        alert(`Reminder set for ${new Date(time).toLocaleString()}: ${title}`);
    }

    function loadReminders() {
        const container = document.getElementById('reminders-list');
        if (reminders.length === 0) {
            container.innerHTML = '<p style="color: #888; text-align: center;">No reminders set yet</p>';
            return;
        }
        
        container.innerHTML = reminders.map(r => `
            <div class="event-item">
                <div class="event-time">${new Date(r.time).toLocaleString()}</div>
                <div class="event-description">${r.title}</div>
            </div>
        `).join('');
    }

    function loadCompletedTasks() {
        document.querySelectorAll('.event-item').forEach(item => {
            const taskId = item.querySelector('.event-description')?.textContent;
            if (completedTasks.includes(taskId)) {
                item.classList.add('completed');
                const checkbox = item.querySelector('.checkbox');
                if (checkbox) checkbox.classList.add('checked');
            }
        });
    }

    function updateCountdown() {
        const tripStart = new Date('2025-08-12T20:35:00');
        const now = new Date();
        const diff = tripStart - now;
        
        if (diff > 0) {
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            document.getElementById('countdown').textContent = `${days} days, ${hours} hours`;
        } else {
            document.getElementById('countdown').textContent = 'Trip in progress! 🎉';
        }
    }

    // Show game message
    function showMessage(text) {
        const messageEl = document.getElementById('gameMessage');
        messageEl.textContent = text;
        messageEl.classList.add('show');
        setTimeout(() => {
            messageEl.classList.remove('show');
        }, 3000);
    }

    function updateProgress() {
        const allTasks = document.querySelectorAll('.event-item').length;
        const completed = document.querySelectorAll('.event-item.completed').length;
        const progress = (completed / allTasks) * 100;
        document.getElementById('progress').style.width = progress + '%';
    }

    // GAME SELECTION
    function selectGame(game) {
        currentGame = game;
        
        // Hide all games
        document.getElementById('merge-game').style.display = 'none';
        document.getElementById('sudoku-game').style.display = 'none';
        document.getElementById('tetris-game').style.display = 'none';
        
        // Update buttons
        document.querySelectorAll('.game-select-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        event.target.classList.add('active');
        
        // Show selected game and initialize
        if (game === 'merge') {
            document.getElementById('merge-game').style.display = 'block';
            if (mergeFruits.length === 0) initMergeGame();
        } else if (game === 'sudoku') {
            document.getElementById('sudoku-game').style.display = 'block';
            if (sudokuBoard.length === 0) initSudoku();
        } else if (game === 'tetris') {
            document.getElementById('tetris-game').style.display = 'block';
            if (!tetrisInterval) initTetris();
        }
    }

    // FRUIT MERGE GAME
    function initMergeGame() {
        mergeFruits = [];
        mergeScore = 0;
        nextFruitType = Math.floor(Math.random() * 3);
        canDrop = true;
        dropX = 175;
        
        document.getElementById('mergeScore').textContent = '0';
        document.getElementById('mergeBiggest').textContent = '🍒';
        document.getElementById('nextFruit').textContent = fruitTypes[nextFruitType];
        
        const best = localStorage.getItem('mergeBest') || '0';
        document.getElementById('mergeBest').textContent = best;
        
        renderMergeGame();
    }

    function handleMergeMouseMove(e) {
        if (!canDrop) return;
        const rect = mergeCanvas.getBoundingClientRect();
        dropX = e.clientX - rect.left;
        dropX = Math.max(30, Math.min(320, dropX));
        renderMergeGame();
    }

    function handleMergeClick(e) {
        if (!canDrop) return;
        dropFruit();
    }

    function dropFruit() {
        if (!canDrop) return;
        
        canDrop = false;
        const fruit = {
            x: dropX,
            y: 30,
            vx: 0,
            vy: 0,
            type: nextFruitType,
            radius: fruitSizes[nextFruitType]
        };
        
        mergeFruits.push(fruit);
        
        // Generate next fruit
        nextFruitType = Math.floor(Math.random() * 3);
        document.getElementById('nextFruit').textContent = fruitTypes[nextFruitType];
        
        // Start physics
        animateMerge();
        
        setTimeout(() => {
            canDrop = true;
        }, 500);
    }

    function animateMerge() {
        // Apply gravity and physics
        let hasMovement = false;
        
        mergeFruits.forEach(fruit => {
            fruit.vy += 0.5; // gravity
            fruit.y += fruit.vy;
            fruit.x += fruit.vx;
            fruit.vx *= 0.99; // friction
            fruit.vy *= 0.98;
            
            // Floor collision
            if (fruit.y + fruit.radius > 480) {
                fruit.y = 480 - fruit.radius;
                fruit.vy *= -0.3;
                if (Math.abs(fruit.vy) > 0.5) hasMovement = true;
            }
            
            // Wall collisions
            if (fruit.x - fruit.radius < 0) {
                fruit.x = fruit.radius;
                fruit.vx *= -0.5;
            }
            if (fruit.x + fruit.radius > 350) {
                fruit.x = 350 - fruit.radius;
                fruit.vx *= -0.5;
            }
            
            if (Math.abs(fruit.vy) > 0.5 || Math.abs(fruit.vx) > 0.5) {
                hasMovement = true;
            }
        });
        
        // Check collisions between fruits
        for (let i = 0; i < mergeFruits.length; i++) {
            for (let j = i + 1; j < mergeFruits.length; j++) {
                const f1 = mergeFruits[i];
                const f2 = mergeFruits[j];
                const dx = f2.x - f1.x;
                const dy = f2.y - f1.y;
                const dist = Math.sqrt(dx * dx + dy * dy);
                const minDist = f1.radius + f2.radius;
                
                if (dist < minDist) {
                    // Merge if same type
                    if (f1.type === f2.type && f1.type < fruitTypes.length - 1) {
                        const newType = f1.type + 1;
                        const newFruit = {
                            x: (f1.x + f2.x) / 2,
                            y: (f1.y + f2.y) / 2,
                            vx: (f1.vx + f2.vx) / 2,
                            vy: (f1.vy + f2.vy) / 2,
                            type: newType,
                            radius: fruitSizes[newType]
                        };
                        
                        mergeFruits.splice(j, 1);
                        mergeFruits.splice(i, 1);
                        mergeFruits.push(newFruit);
                        
                        // Update score
                        mergeScore += (newType + 1) * 10;
                        document.getElementById('mergeScore').textContent = mergeScore;
                        
                        // Update biggest fruit
                        const biggestType = Math.max(...mergeFruits.map(f => f.type));
                        document.getElementById('mergeBiggest').textContent = fruitTypes[biggestType];
                        document.getElementById('mergeLevel').textContent = Math.floor(mergeScore / 100) + 1;
                        
                        // Save best score
                        const best = parseInt(localStorage.getItem('mergeBest') || '0');
                        if (mergeScore > best) {
                            localStorage.setItem('mergeBest', mergeScore);
                            document.getElementById('mergeBest').textContent = mergeScore;
                        }
                        
                        showMessage('✨ Magic Merge! +' + ((newType + 1) * 10));
                        hasMovement = true;
                    } else {
                        // Physics collision
                        const overlap = minDist - dist;
                        const pushX = (dx / dist) * overlap * 0.5;
                        const pushY = (dy / dist) * overlap * 0.5;
                        
                        f1.x -= pushX;
                        f1.y -= pushY;
                        f2.x += pushX;
                        f2.y += pushY;
                        
                        const relVx = f2.vx - f1.vx;
                        const relVy = f2.vy - f1.vy;
                        const impulse = (relVx * dx + relVy * dy) / (dist * dist) * 0.5;
                        
                        f1.vx += impulse * dx;
                        f1.vy += impulse * dy;
                        f2.vx -= impulse * dx;
                        f2.vy -= impulse * dy;
                    }
                }
            }
        }
        
        renderMergeGame();
        
        // Check game over
        if (mergeFruits.some(f => f.y < 50 && Math.abs(f.vy) < 0.5)) {
            showMessage('Game Over! Final Score: ' + mergeScore);
            setTimeout(() => {
                if (confirm('Play again?')) initMergeGame();
            }, 1000);
            return;
        }
        
        if (hasMovement) {
            requestAnimationFrame(animateMerge);
        }
    }

    function renderMergeGame() {
        if (!mergeCtx) return;
        
        mergeCtx.clearRect(0, 0, 350, 500);
        
        // Draw drop line
        if (canDrop) {
            mergeCtx.strokeStyle = '#667eea';
            mergeCtx.lineWidth = 2;
            mergeCtx.setLineDash([5, 5]);
            mergeCtx.beginPath();
            mergeCtx.moveTo(dropX, 0);
            mergeCtx.lineTo(dropX, 60);
            mergeCtx.stroke();
            mergeCtx.setLineDash([]);
            
            // Draw preview fruit
            mergeCtx.font = `${fruitSizes[nextFruitType] * 1.5}px Arial`;
            mergeCtx.textAlign = 'center';
            mergeCtx.fillText(fruitTypes[nextFruitType], dropX, 40);
        }
        
        // Draw fruits
        mergeFruits.forEach(fruit => {
            mergeCtx.font = `${fruit.radius * 1.5}px Arial`;
            mergeCtx.textAlign = 'center';
            mergeCtx.fillText(fruitTypes[fruit.type], fruit.x, fruit.y + fruit.radius * 0.3);
        });
    }

    // SUDOKU GAME
    function initSudoku() {
        sudokuErrors = 0;
        sudokuHints = 3;
        sudokuTime = 0;
        selectedSudokuCell = null;
        
        if (sudokuTimer) clearInterval(sudokuTimer);
        sudokuTimer = setInterval(updateSudokuTime, 1000);
        
        generateSudoku();
        renderSudoku();
        
        document.getElementById('sudokuErrors').textContent = '0';
        document.getElementById('sudokuHints').textContent = '3';
    }

    function generateSudoku() {
        // Generate a valid complete sudoku
        sudokuSolution = [
            [5,3,4,6,7,8,9,1,2],
            [6,7,2,1,9,5,3,4,8],
            [1,9,8,3,4,2,5,6,7],
            [8,5,9,7,6,1,4,2,3],
            [4,2,6,8,5,3,7,9,1],
            [7,1,3,9,2,4,8,5,6],
            [9,6,1,5,3,7,2,8,4],
            [2,8,7,4,1,9,6,3,5],
            [3,4,5,2,8,6,1,7,9]
        ];
        
        // Shuffle the solution
        for (let i = 0; i < 20; i++) {
            const r1 = Math.floor(Math.random() * 3) * 3 + Math.floor(Math.random() * 3);
            const r2 = Math.floor(Math.random() * 3) * 3 + Math.floor(Math.random() * 3);
            [sudokuSolution[r1], sudokuSolution[r2]] = [sudokuSolution[r2], sudokuSolution[r1]];
        }
        
        // Create puzzle by removing numbers
        sudokuBoard = sudokuSolution.map(row => [...row]);
        const difficulty = document.getElementById('sudokuDifficulty').value;
        const toRemove = difficulty === 'easy' ? 30 : difficulty === 'medium' ? 40 : 50;
        
        for (let i = 0; i < toRemove; i++) {
            const row = Math.floor(Math.random() * 9);
            const col = Math.floor(Math.random() * 9);
            sudokuBoard[row][col] = 0;
        }
    }

    function renderSudoku() {
        const boardEl = document.getElementById('sudokuBoard');
        boardEl.innerHTML = '';
        
        for (let i = 0; i < 9; i++) {
            for (let j = 0; j < 9; j++) {
                const cell = document.createElement('div');
                cell.className = 'sudoku-cell';
                cell.dataset.row = i;
                cell.dataset.col = j;
                
                if (sudokuBoard[i][j] !== 0) {
                    cell.textContent = sudokuBoard[i][j];
                    if (sudokuSolution[i][j] === sudokuBoard[i][j]) {
                        cell.classList.add('given');
                    }
                }
                
                cell.onclick = () => selectSudokuCell(i, j);
                boardEl.appendChild(cell);
            }
        }
    }

    function selectSudokuCell(row, col) {
        const cells = document.querySelectorAll('.sudoku-cell');
        cells.forEach(c => c.classList.remove('selected'));
        
        selectedSudokuCell = { row, col };
        cells[row * 9 + col].classList.add('selected');
    }

    function selectNumber(num) {
        if (!selectedSudokuCell) return;
        
        const { row, col } = selectedSudokuCell;
        const cell = document.querySelectorAll('.sudoku-cell')[row * 9 + col];
        
        if (cell.classList.contains('given')) return;
        
        if (num === 0) {
            sudokuBoard[row][col] = 0;
            cell.textContent = '';
            cell.classList.remove('error');
        } else {
            sudokuBoard[row][col] = num;
            cell.textContent = num;
            
            if (num !== sudokuSolution[row][col]) {
                cell.classList.add('error');
                sudokuErrors++;
                document.getElementById('sudokuErrors').textContent = sudokuErrors;
            } else {
                cell.classList.remove('error');
                checkSudokuWin();
            }
        }
    }

    function getSudokuHint() {
        if (sudokuHints <= 0) {
            showMessage('No hints remaining!');
            return;
        }
        
        // Find an empty cell
        const emptyCells = [];
        for (let i = 0; i < 9; i++) {
            for (let j = 0; j < 9; j++) {
                if (sudokuBoard[i][j] === 0) {
                    emptyCells.push({ row: i, col: j });
                }
            }
        }
        
        if (emptyCells.length === 0) return;
        
        const hint = emptyCells[Math.floor(Math.random() * emptyCells.length)];
        sudokuBoard[hint.row][hint.col] = sudokuSolution[hint.row][hint.col];
        
        const cell = document.querySelectorAll('.sudoku-cell')[hint.row * 9 + hint.col];
        cell.textContent = sudokuSolution[hint.row][hint.col];
        cell.classList.add('hint');
        
        sudokuHints--;
        document.getElementById('sudokuHints').textContent = sudokuHints;
        
        checkSudokuWin();
    }

    function checkSudoku() {
        let correct = true;
        const cells = document.querySelectorAll('.sudoku-cell');
        
        for (let i = 0; i < 9; i++) {
            for (let j = 0; j < 9; j++) {
                if (sudokuBoard[i][j] !== sudokuSolution[i][j]) {
                    correct = false;
                    if (sudokuBoard[i][j] !== 0) {
                        cells[i * 9 + j].classList.add('error');
                    }
                }
            }
        }
        
        if (correct) {
            showMessage('🎉 Perfect! Puzzle Complete!');
            clearInterval(sudokuTimer);
        } else {
            showMessage('Some numbers are incorrect');
        }
    }

    function checkSudokuWin() {
        for (let i = 0; i < 9; i++) {
            for (let j = 0; j < 9; j++) {
                if (sudokuBoard[i][j] !== sudokuSolution[i][j]) {
                    return false;
                }
            }
        }
        
        showMessage('🏰 Castle Complete! Well Done!');
        clearInterval(sudokuTimer);
        return true;
    }

    function updateSudokuTime() {
        sudokuTime++;
        const minutes = Math.floor(sudokuTime / 60);
        const seconds = sudokuTime % 60;
        document.getElementById('sudokuTime').textContent = 
            `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }

    // TETRIS GAME
    function initTetris() {
        tetrisBoard = Array(20).fill().map(() => Array(10).fill(0));
        tetrisScore = 0;
        tetrisLines = 0;
        tetrisLevel = 1;
        tetrisPaused = false;
        
        document.getElementById('tetrisScore').textContent = '0';
        document.getElementById('tetrisLines').textContent = '0';
        document.getElementById('tetrisLevel').textContent = '1';
        
        const best = localStorage.getItem('tetrisBest') || '0';
        document.getElementById('tetrisBest').textContent = best;
        
        spawnTetrisPiece();
        
        if (tetrisInterval) clearInterval(tetrisInterval);
        tetrisInterval = setInterval(updateTetris, 1000 / tetrisLevel);
        
        renderTetris();
    }

    function spawnTetrisPiece() {
        const type = Math.floor(Math.random() * tetrisPieces.length);
        currentPiece = {
            type: type,
            shape: tetrisPieces[type],
            x: 4,
            y: 0,
            color: tetrisColors[type]
        };
        
        if (!canPlacePiece(currentPiece)) {
            gameOverTetris();
        }
        
        // Generate next piece
        const nextType = Math.floor(Math.random() * tetrisPieces.length);
        nextPiece = {
            type: nextType,
            shape: tetrisPieces[nextType],
            color: tetrisColors[nextType]
        };
        
        renderNextPiece();
    }

    function canPlacePiece(piece) {
        for (let y = 0; y < piece.shape.length; y++) {
            for (let x = 0; x < piece.shape[y].length; x++) {
                if (piece.shape[y][x]) {
                    const boardX = piece.x + x;
                    const boardY = piece.y + y;
                    
                    if (boardX < 0 || boardX >= 10 || boardY >= 20) {
                        return false;
                    }
                    
                    if (boardY >= 0 && tetrisBoard[boardY][boardX]) {
                        return false;
                    }
                }
            }
        }
        return true;
    }

    function updateTetris() {
        if (tetrisPaused) return;
        
        currentPiece.y++;
        if (!canPlacePiece(currentPiece)) {
            currentPiece.y--;
            placePiece();
            checkTetrisLines();
            spawnTetrisPiece();
        }
        
        renderTetris();
    }

    function placePiece() {
        for (let y = 0; y < currentPiece.shape.length; y++) {
            for (let x = 0; x < currentPiece.shape[y].length; x++) {
                if (currentPiece.shape[y][x]) {
                    const boardY = currentPiece.y + y;
                    const boardX = currentPiece.x + x;
                    if (boardY >= 0) {
                        tetrisBoard[boardY][boardX] = currentPiece.type + 1;
                    }
                }
            }
        }
    }

    function checkTetrisLines() {
        let linesCleared = 0;
        
        for (let y = tetrisBoard.length - 1; y >= 0; y--) {
            if (tetrisBoard[y].every(cell => cell !== 0)) {
                tetrisBoard.splice(y, 1);
                tetrisBoard.unshift(Array(10).fill(0));
                linesCleared++;
                y++;
            }
        }
        
        if (linesCleared > 0) {
            tetrisLines += linesCleared;
            tetrisScore += linesCleared * 100 * tetrisLevel;
            tetrisLevel = Math.floor(tetrisLines / 10) + 1;
            
            document.getElementById('tetrisScore').textContent = tetrisScore;
            document.getElementById('tetrisLines').textContent = tetrisLines;
            document.getElementById('tetrisLevel').textContent = tetrisLevel;
            
            // Update speed
            clearInterval(tetrisInterval);
            tetrisInterval = setInterval(updateTetris, Math.max(100, 1000 - tetrisLevel * 100));
            
            // Save best score
            const best = parseInt(localStorage.getItem('tetrisBest') || '0');
            if (tetrisScore > best) {
                localStorage.setItem('tetrisBest', tetrisScore);
                document.getElementById('tetrisBest').textContent = tetrisScore;
            }
            
            showMessage(`🏰 ${linesCleared} lines! +${linesCleared * 100 * tetrisLevel}`);
        }
    }

    function rotatePiece() {
        const rotated = currentPiece.shape[0].map((_, i) =>
            currentPiece.shape.map(row => row[i]).reverse()
        );
        
        const oldShape = currentPiece.shape;
        currentPiece.shape = rotated;
        
        if (!canPlacePiece(currentPiece)) {
            currentPiece.shape = oldShape;
        }
    }

    function handleTetrisKey(e) {
        if (currentTab !== 'games' || currentGame !== 'tetris' || !currentPiece) return;
        
        switch(e.key) {
            case 'ArrowLeft':
                currentPiece.x--;
                if (!canPlacePiece(currentPiece)) currentPiece.x++;
                break;
            case 'ArrowRight':
                currentPiece.x++;
                if (!canPlacePiece(currentPiece)) currentPiece.x--;
                break;
            case 'ArrowDown':
                currentPiece.y++;
                if (!canPlacePiece(currentPiece)) {
                    currentPiece.y--;
                    placePiece();
                    checkTetrisLines();
                    spawnTetrisPiece();
                }
                break;
            case 'ArrowUp':
                rotatePiece();
                break;
            case ' ':
                while (canPlacePiece(currentPiece)) {
                    currentPiece.y++;
                }
                currentPiece.y--;
                placePiece();
                checkTetrisLines();
                spawnTetrisPiece();
                break;
        }
        
        renderTetris();
    }

    function renderTetris() {
        if (!tetrisCtx) return;
        
        tetrisCtx.clearRect(0, 0, 300, 600);
        
        // Draw board
        for (let y = 0; y < 20; y++) {
            for (let x = 0; x < 10; x++) {
                if (tetrisBoard[y][x]) {
                    tetrisCtx.fillStyle = tetrisColors[tetrisBoard[y][x] - 1];
                    tetrisCtx.fillRect(x * 30, y * 30, 28, 28);
                }
            }
        }
        
        // Draw current piece
        if (currentPiece) {
            tetrisCtx.fillStyle = currentPiece.color;
            for (let y = 0; y < currentPiece.shape.length; y++) {
                for (let x = 0; x < currentPiece.shape[y].length; x++) {
                    if (currentPiece.shape[y][x]) {
                        tetrisCtx.fillRect(
                            (currentPiece.x + x) * 30,
                            (currentPiece.y + y) * 30,
                            28, 28
                        );
                    }
                }
            }
        }
    }

    function renderNextPiece() {
        if (!nextCtx || !nextPiece) return;
        
        nextCtx.clearRect(0, 0, 100, 100);
        nextCtx.fillStyle = nextPiece.color;
        
        const offsetX = (4 - nextPiece.shape[0].length) * 12;
        const offsetY = (4 - nextPiece.shape.length) * 12;
        
        for (let y = 0; y < nextPiece.shape.length; y++) {
            for (let x = 0; x < nextPiece.shape[y].length; x++) {
                if (nextPiece.shape[y][x]) {
                    nextCtx.fillRect(offsetX + x * 25, offsetY + y * 25, 23, 23);
                }
            }
        }
    }

    function pauseTetris() {
        tetrisPaused = !tetrisPaused;
        showMessage(tetrisPaused ? 'Game Paused' : 'Game Resumed');
    }

    function gameOverTetris() {
        clearInterval(tetrisInterval);
        tetrisInterval = null;
        showMessage(`Castle Complete! Score: ${tetrisScore}`);
        
        setTimeout(() => {
            if (confirm('Build another castle?')) {
                initTetris();
            }
        }, 1000);
    }

    // Show game message
    function showMessage(text) {
        const messageEl = document.getElementById('gameMessage');
        messageEl.textContent = text;
        messageEl.classList.add('show');
        setTimeout(() => {
            messageEl.classList.remove('show');
        }, 3000);
    }
</script>
</script>
```

</body>
</html>